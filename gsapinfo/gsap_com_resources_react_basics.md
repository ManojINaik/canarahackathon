[GSAPGSAP](https://gsap.com/) Menu

- Tools




- [Core](https://gsap.com/core/)
- [Scroll](https://gsap.com/scroll/)
- [SVG](https://gsap.com/svg/)
- [UI](https://gsap.com/ui/)
- [Text](https://gsap.com/text/)

- [Installation](https://gsap.com/docs/v3/Installation)
- [Starter Templates](https://gsap.com/demos)
- [GSAP & React](https://gsap.com/resources/React)
- [Video Lessons](https://www.youtube.com/@GreenSockLearning)

Professional-grade JavaScript animation for the modern web

![](https://gsap.com/img/header-shapes.png)

- [Pricing](https://gsap.com/pricing/)
- [Showcase](https://gsap.com/showcase/)
- [Community](https://gsap.com/community/)
- [Learn GSAP](https://gsap.com/resources/)
- [Docs](https://gsap.com/docs/v3)

- Notifications






#### Notifications



[Notification Settings](https://gsap.com/community/notifications/options) [View All](https://gsap.com/community/notifications/)

- Messages






#### Messages



[Compose new](https://gsap.com/community/messenger/compose) [Go to Inbox](https://gsap.com/community/messenger)

- Login/Create Account




#### Sign In







Login [Forgot your password?](https://gsap.com/community/lostpassword/)





#### Why create an account?



- It's free

- Participate in the forums

- Updates on the products you use

- Exclusive offers and more


[Create an Account](https://gsap.com/community/register)

- [My Account](https://gsap.com/community/account-dashboard)








![Guest](https://gsap.com/community/uploads/set_resources_8/84c1e40ea0e759e3f1505eb1788ddf3c_default_photo.png)





Guest







Guests







- [Dashboard](https://gsap.com/community/account-dashboard)
- [Orders & Billing](https://gsap.com/community/clients/orders)
- [Account Settings](https://gsap.com/community/settings)
- [Logout](https://gsap.com/community/logout/?csrfKey=03a1f0445a20240f84057f1f690de8a8)

- [Get GSAP](https://gsap.com/docs/v3/Installation)

- Tools
  - [Core](https://gsap.com/core/)
  - [Scroll](https://gsap.com/scroll/)
  - [SVG](https://gsap.com/svg/)
  - [UI](https://gsap.com/ui/)
  - [Text](https://gsap.com/text/)
- [Pricing](https://gsap.com/pricing/)
- [Showcase](https://gsap.com/showcase/)
- [Community](https://gsap.com/community/)
- [Learn GSAP](https://gsap.com/resources/)
- [Docs](https://gsap.com/docs/v3/)

- Login/Create Account
- ![Guest](https://gsap.com/community/uploads/set_resources_8/84c1e40ea0e759e3f1505eb1788ddf3c_default_photo.png)





Guest







Guests


![Guest](https://gsap.com/community/uploads/set_resources_8/84c1e40ea0e759e3f1505eb1788ddf3c_default_photo.png)

Guest

Guests

- [Dashboard](https://gsap.com/community/account-dashboard)
- [Orders & Billing](https://gsap.com/community/clients/orders)
- [Account Settings](https://gsap.com/community/settings)
- [Logout](https://gsap.com/community/logout/?csrfKey=03a1f0445a20240f84057f1f690de8a8)
- [Messages](https://gsap.com/community/messenger/)
- [Notifications](https://gsap.com/community/notifications/)

#### Sign In

Login [Forgot your password?](https://gsap.com/community/lostpassword/)

#### Not got an account?

[Create an Account](https://gsap.com/community/register)

- [CodePen](https://codepen.io/GreenSock)
- [GitHub](https://github.com/greensock/GreenSock-JS/)
- [Facebook](https://www.facebook.com/greensock/)
- [LinkedIn](https://www.linkedin.com/company/greensock)
- [x](https://www.twitter.com/greensock/)

![](https://gsap.com/img/header-shapes.png)

[Skip to main content](https://gsap.com/resources/react-basics/#__docusaurus_skipToContent_fallback)

[Docs](https://gsap.com/docs/v3/) [Learning](https://gsap.com/resources)

[v3.12.7](https://gsap.com/docs/v3/)

- [v3.12.7](https://gsap.com/docs/v3/)
- [v2 - archived](https://www.gsap.com/archived-docs/)

Search`` `K`

- [placeholder](https://gsap.com/resources/)
- Quick Start
- [Installation](https://gsap.com/docs/v3/Installation)
- [YouTube Channel](https://www.youtube.com/@GreenSockLearning)
- [Trial the Club Plugins](https://gsap.com/resources/trial)
- [Demos / Starter Templates](https://gsap.com/demos)
- [Cheatsheet](https://gsap.com/cheatsheet)
- Getting Started
- [Your first animation](https://gsap.com/resources/get-started)
- [Easing](https://gsap.com/resources/getting-started/Easing)
- [Staggers](https://gsap.com/resources/getting-started/Staggers)
- [Sequencing animations](https://gsap.com/resources/getting-started/timelines)
- [Control and Callbacks](https://gsap.com/resources/getting-started/control)
- Plugins
- [What's a plugin?](https://gsap.com/resources/Plugins/)
- [ScrollTrigger tips & mistakes](https://gsap.com/resources/st-mistakes)
- Diving deeper
- [Accessibility](https://gsap.com/resources/a11y)
- [Handling conflicting tweens](https://gsap.com/resources/conflict)
- [Avoiding FOUC](https://gsap.com/resources/fouc)
- [immediateRender](https://gsap.com/resources/immediaterender)
- [Common GSAP mistakes](https://gsap.com/resources/mistakes)
- [The Position Parameter](https://gsap.com/resources/position-parameter)
- [Keyframes](https://gsap.com/resources/keyframes)
- Using GSAP with...
- [JS Frameworks](https://gsap.com/resources/frameworks)
- [React](https://gsap.com/resources/React)

  - [Useful patterns](https://gsap.com/resources/react-basics)
  - [Advanced techniques](https://gsap.com/resources/react-advanced)
- [SVG](https://gsap.com/resources/svg)
- [Webflow](https://gsap.com/resources/Webflow)
- [Wordpress](https://gsap.com/resources/Wordpress)
- and more...
- [updating to GSAP 3](https://gsap.com/resources/3-migration)

- [React](https://gsap.com/resources/React)
- Useful patterns

On this page

# Useful Patterns

Quick Start - useGSAP()

### useGSAP() hook

[view package on npm](https://www.npmjs.com/package/@gsap/react)

```codeBlockLines_p187
npm install @gsap/react

```

```codeBlockLines_p187
import gsap from "gsap";
import { useGSAP } from "@gsap/react";

gsap.registerPlugin(useGSAP);

const container = useRef();

useGSAP(() => {
  // gsap code here...
  gsap.to(".el", {rotation: 180}); // <-- automatically reverted

}, { scope: container }) // <-- scope for selector text (optional)

```

[Starter Templates](https://stackblitz.com/@GSAP-dev/collections/gsap-react-starters)

## useGSAP() is your best friend ðŸ’š [â€‹](https://gsap.com/resources/react-basics/\#usegsap-is-your-best-friend- "Direct link to useGSAP() is your best friend ðŸ’š")

In this guide we will be using our `useGSAP()` hook - the easiest way to use GSAP in React. It's a drop-in replacement for [React's Effects](https://react.dev/reference/react/useEffect) that automatically handles cleanup using [`gsap.context()`](https://gsap.com/docs/v3/GSAP/gsap.context()/). [Cleanup is important](https://react.dev/learn/synchronizing-with-effects#triggering-animations) in React and this hook makes it simple.

```codeBlockLines_p187
import { useRef } from "react";
import gsap from "gsap";
import { useGSAP } from "@gsap/react";

gsap.registerPlugin(useGSAP);

const container = useRef();

useGSAP(() => {
  // gsap code here...
  gsap.to(".box", {x: 100}); // <-- automatically reverted

}, { scope: container }); // <-- easily add a scope for selector text (optional)

```

#### loading...

CodePen Embed - useGSAP

- [HTML](https://codepen.io/GreenSock/embed/OJmQvLZ?default-tab=result&theme-id=41164#html-box)
- [CSS](https://codepen.io/GreenSock/embed/OJmQvLZ?default-tab=result&theme-id=41164#css-box)
- [Babel](https://codepen.io/GreenSock/embed/OJmQvLZ?default-tab=result&theme-id=41164#js-box)

- [Result](https://codepen.io/GreenSock/embed/OJmQvLZ?default-tab=result&theme-id=41164#result-box)
- [Skip Results Iframe](https://codepen.io/GreenSock/embed/OJmQvLZ?default-tab=result&theme-id=41164#resources-link)

[EDIT ON](https://codepen.io/GreenSock/pen/OJmQvLZ "Edit on CodePen")

``` cm-s-default
<div id="root"></div>
```

``` cm-s-default
body {
  background-color: var(--dark);
  color: var(--light);
  margin: 0;
  padding: 0;
  height: 100vh;
}

.box {
  width: 100px;
  height: 100px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  font-weight: 600;
  margin: 10px;
}

.circle {
  width: 100px;
  height: 100px;
  border-radius: 99%;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  font-weight: 600;
  margin: 10px;
}

.App, .container {
  display: flex;
  align-items: center;
  justify-content: space-around;
  min-height: 100vh;
}
```

``` cm-s-default
import React from "https://esm.sh/react@19.0.0";
import ReactDOM from "https://esm.sh/react-dom@19.0.0/client";

import gsap from "https://esm.sh/gsap";
import { useGSAP } from "https://esm.sh/@gsap/react?deps=react@19.0.0";

gsap.registerPlugin(useGSAP);

const { useRef } = React;
console.log(React.version);
function App() {
  const container = useRef();
  const circle = useRef();

  useGSAP(
    () => {
      // use selectors...
      gsap.to(".box", { rotation: "+=360", duration: 3 });

      // or refs...
      gsap.to(circle.current, { rotation: "-=360", duration: 3 });
    },
    { scope: container }
  ); // <-- scope for selector text (optional)

  return (
    <div className="App">
      <div ref={container} className="container">
        <div className="box gradient-blue">selector</div>
        <div className="circle gradient-green" ref={circle}>
          Ref
        </div>
      </div>
      <div className="box gradient-blue">selector</div>
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(<App />);

```

[View Compiled](https://codepen.io/GreenSock/embed/OJmQvLZ?default-tab=result&theme-id=41164#0)

useGSAP

selector

Ref

selector

![](https://assets.codepen.io/16327/logo-react-gsap.png)

[useGSAP() hook](https://www.npmjs.com/package/@gsap/react?activeTab=readme) \|
[Docs](https://www.gsap.com/resources/React)

[![](https://assets.codepen.io/16327/internal/avatars/users/default.png?fit=crop&format=auto&height=256&version=1697554632&width=256)](https://codepen.io/GreenSock)

This Pen is owned by [GSAP](https://codepen.io/GreenSock) on [CodePen](https://codepen.io/).



[See more by @GreenSock on CodePen](https://codepen.io/GreenSock)

### External CSS

1. [https://codepen.io/GreenSock/pen/xxmzBrw/fcaef74061bb7a76e5263dfc076c363e.css](https://codepen.io/GreenSock/pen/xxmzBrw/fcaef74061bb7a76e5263dfc076c363e.css)

### External JavaScript

1. [https://codepen.io/GreenSock/pen/NWoLXRG.js](https://codepen.io/GreenSock/pen/NWoLXRG.js)

Resources


- 1Ã—
- 0.5Ã—
- 0.25Ã—

Rerun

We cover [`useGSAP()`](https://www.npmjs.com/package/@gsap/react?activeTab=readme#gsapreact-for-using-gsap-in-react) in more detail in our [previous article](https://gsap.com/resources/React#usegsap-hook-)

## Targeting elements with Refs [â€‹](https://gsap.com/resources/react-basics/\#targeting-elements-with-refs "Direct link to Targeting elements with Refs")

In order to animate, we need to tell GSAP which elements we want to target. The **_React way_** to access elements is by using **[Refs](https://reactjs.org/docs/refs-and-the-dom.html)**

Refs are a safe, reliable reference to a particular DOM node.

```codeBlockLines_p187
const boxRef = useRef();

useGSAP(() => {
 // Refs allow you to access DOM nodes
  console.log(boxRef) // { current: div.box }

  // then we can animate them like so...
  gsap.to(boxRef.current, {
    rotation: "+=360"
  });

});

return (
  <div className="App">
    <div className="box" ref={boxRef}>Hello</div>
  </div>
);

```

This can get messy

**However** \- animation often involves targeting **_many_** DOM elements. If we wanted to stagger 10 different elements we'd have to create a Ref for **each** DOM node. This can quickly get repetitive.

```codeBlockLines_p187
// So many refs...
const container = useRef();
const box1 = useRef();
const box2 = useRef();
const box3 = useRef();

// ...just to do a simple stagger
useGSAP(() => {
  gsap.from([box1, box2, box3], {opacity: 0, stagger: 0.1});
});

return (
  <div ref={container}>
      <div ref={box1} className="box"></div>
      <div ref={box2} className="box"></div>
      <div ref={box3} className="box"></div>
  </div>
);

```

By defining a **scope** we can we leverage the **_flexibility_** of selector text with the **security** of Refs.

## Scoped Selectors [â€‹](https://gsap.com/resources/react-basics/\#scoped-selectors "Direct link to Scoped Selectors")

When we pass in a [Ref](https://react.dev/reference/react/useRef) as the scope, all selector text (like `".my-class"`) used in GSAP-related code inside the `useGSAP()` hook will be scoped accordingly, meaning your selector text will only select **descendants** of the container Ref. No need to create a Ref for every element!

```codeBlockLines_p187
// we only need one ref, the container. Use selector text for the rest (scoped to only find descendants of container).
const container = useRef();

useGSAP(() => {
    gsap.from(".box", {opacity: 0, stagger: 0.1});
}, { scope: container }) // <-- scope

return (
  <div ref={container}>
      <div className="box"></div>
      <div className="box"></div>
      <div className="box"></div>
  </div>
);

```

deep dive...

Refs or scoped selectors?

Targeting elements by using selector text like `".my-class"` in your GSAP-related code is much easier than creating a ref for each and every element that you want to animate - that's why we typically recommend using scoped selectors.

An exception would be if you're going to be **nesting** components and want to prevent against your selectors grabbing elements in child components.

In this example we've got two elements animating in the main App. A box targeted with a scoped class selector, and a circle targeted with a Ref. Both are animating just like we'd expect.

But - we've nested another component inside our app. This nested element **also** has child with a class name of '.box'. You can see that the nested box element is being targeted by the animation in the App's GSAP code, whereas the nested circle, which was targeted with a **Ref** isn't inheriting the animation.

#### loading...

CodePen Embed - Nested boxes

- [HTML](https://codepen.io/GreenSock/embed/QWxBvMO?default-tab=result&theme-id=41164#html-box)
- [CSS](https://codepen.io/GreenSock/embed/QWxBvMO?default-tab=result&theme-id=41164#css-box)
- [Babel](https://codepen.io/GreenSock/embed/QWxBvMO?default-tab=result&theme-id=41164#js-box)

- [Result](https://codepen.io/GreenSock/embed/QWxBvMO?default-tab=result&theme-id=41164#result-box)
- [Skip Results Iframe](https://codepen.io/GreenSock/embed/QWxBvMO?default-tab=result&theme-id=41164#resources-link)

[EDIT ON](https://codepen.io/GreenSock/pen/QWxBvMO "Edit on CodePen")

``` cm-s-default
<div id="root"></div>
```

``` cm-s-default
* {
 box-sizing: border-box
}

html, body {
  background-color: var(--dark);
  color: var(--light);
  margin: 0;
  padding: 0;
  height: 100vh;
}

.box {
  width: 100px;
  height: 100px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  font-weight: 600;
  color: var(--dark);
  padding: 10px;
}

.circle {
  width: 100px;
  height: 100px;
  border-radius: 99%;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  font-weight: 600;
  color: var(--dark);
  padding: 10px;
}

.nested {
  border: solid 2px var(--light);
  border-radius: 8px;
  padding: 2rem;
  height: 350px;
  display: flex;
  flex-direction: column;
  justify-content: space-around;
}

.App {
  display: flex;
  align-items: center;
  justify-content: space-around;
  min-height: 100vh;
}
```

``` cm-s-default
import React from "https://esm.sh/react@19.0.0";
import ReactDOM from "https://esm.sh/react-dom@19.0.0/client";

import gsap from "https://esm.sh/gsap";
import { useGSAP } from "https://esm.sh/@gsap/react?deps=react@19.0.0";

gsap.registerPlugin(useGSAP);

const { useRef } = React;

const Nested = () => {
  return (
    <div className="nested">
      <div className="box gradient-green">'Leaking' scope</div>
      <div className="circle gradient-blue">No 'leaking'</div>
    </div>
  );
};

function App() {
  const container = useRef();
  const circle = useRef();

  useGSAP(() => {
    gsap.to(".box", {
        rotation: "+=360",
        duration: 3,
        repeat: -1,
        ease: 'none'
     });

      gsap.to(circle.current, {
        rotation: "+=360",
        duration: 3,
        repeat: -1,
        ease: 'none'
      });

  }, {scope: container});

  return (
    <div ref={container} className="App">
      <div className="box gradient-green">Using selector</div>
      <div className="circle gradient-blue" ref={circle}>Using Ref</div>
      <Nested/>
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<App />);

```

[View Compiled](https://codepen.io/GreenSock/embed/QWxBvMO?default-tab=result&theme-id=41164#0)

[![](https://assets.codepen.io/16327/internal/avatars/users/default.png?fit=crop&format=auto&height=256&version=1697554632&width=256)](https://codepen.io/GreenSock)

This Pen is owned by [GSAP](https://codepen.io/GreenSock) on [CodePen](https://codepen.io/).



[See more by @GreenSock on CodePen](https://codepen.io/GreenSock)

### External CSS

1. [https://codepen.io/GreenSock/pen/xxmzBrw/fcaef74061bb7a76e5263dfc076c363e.css](https://codepen.io/GreenSock/pen/xxmzBrw/fcaef74061bb7a76e5263dfc076c363e.css)

### External JavaScript

1. [https://codepen.io/GreenSock/pen/NWoLXRG.js](https://codepen.io/GreenSock/pen/NWoLXRG.js)

Resources


- 1Ã—
- 0.5Ã—
- 0.25Ã—

Rerun

## Reusing components [â€‹](https://gsap.com/resources/react-basics/\#reusing-components "Direct link to Reusing components")

Within a component based system, you may need more granular control over the elements you're targeting. You can pass props down to children to adjust class names or data attributes and target specific elements.

#### loading...

CodePen Embed - Reusable components

- [HTML](https://codepen.io/GreenSock/embed/RwVBWGW?default-tab=result&theme-id=41164#html-box)
- [CSS](https://codepen.io/GreenSock/embed/RwVBWGW?default-tab=result&theme-id=41164#css-box)
- [Babel](https://codepen.io/GreenSock/embed/RwVBWGW?default-tab=result&theme-id=41164#js-box)

- [Result](https://codepen.io/GreenSock/embed/RwVBWGW?default-tab=result&theme-id=41164#result-box)
- [Skip Results Iframe](https://codepen.io/GreenSock/embed/RwVBWGW?default-tab=result&theme-id=41164#resources-link)

[EDIT ON](https://codepen.io/GreenSock/pen/RwVBWGW "Edit on CodePen")

``` cm-s-default
<div id="root" class="panel"></div>
```

``` cm-s-default
body{
  margin: 0;
  padding: 0;
  height: 100vh;
  overflow: hidden;
}

.app {
  padding: 10px;
  display: flex;
  align-items: center;
  height: 100vh;
  justify-content: space-around;
}

.box {
  margin: 30px 0;
  padding: 10px;
}
```

``` cm-s-default
import React from "https://esm.sh/react@19.0.0";
import ReactDOM from "https://esm.sh/react-dom@19.0.0/client";

import gsap from "https://esm.sh/gsap";
import { useGSAP } from "https://esm.sh/@gsap/react?deps=react@19.0.0";

gsap.registerPlugin(useGSAP);

const { useRef } = React;

const Box = ({ children, className, anim }) => {
  return (
    <div className={"box " + className} data-animate={anim}>
      {children}
    </div>
  );
};

function App() {
  const container = useRef();

  useGSAP(() => {
    // Target the two specific elements we have asigned the animate class
    gsap.to("[data-animate='rotate']", {
      rotation: 360,
      repeat: -1,
      repeatDelay: 1,
      yoyo: true
    });

    gsap.to("[data-animate='move']", {
      x: 50,
      repeat: -1,
      repeatDelay: 1,
      yoyo: true
    });

   }, {scope: container}); // <-- scope for selector text (optional)

  return (
    <div className="app" ref={container}>
      <Box anim="rotate" className="gradient-blue">Box</Box>
      <Box className="dont-animate gradient-red">Don't Animate</Box>
      <Box anim="move" className="gradient-blue">Box</Box>
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(<App />);

```

[View Compiled](https://codepen.io/GreenSock/embed/RwVBWGW?default-tab=result&theme-id=41164#0)

Reusable components

Box

Don't Animate

Box

![](https://assets.codepen.io/16327/logo-react-gsap.png)

[useGSAP() hook](https://www.npmjs.com/package/@gsap/react?activeTab=readme) \|
[Docs](https://www.gsap.com/resources/React)

[![](https://assets.codepen.io/16327/internal/avatars/users/default.png?fit=crop&format=auto&height=256&version=1697554632&width=256)](https://codepen.io/GreenSock)

This Pen is owned by [GSAP](https://codepen.io/GreenSock) on [CodePen](https://codepen.io/).



[See more by @GreenSock on CodePen](https://codepen.io/GreenSock)

### External CSS

1. [https://codepen.io/GreenSock/pen/xxmzBrw/fcaef74061bb7a76e5263dfc076c363e.css](https://codepen.io/GreenSock/pen/xxmzBrw/fcaef74061bb7a76e5263dfc076c363e.css)

### External JavaScript

1. [https://codepen.io/GreenSock/pen/NWoLXRG.js](https://codepen.io/GreenSock/pen/NWoLXRG.js)

Resources


- 1Ã—
- 0.5Ã—
- 0.25Ã—

Rerun

## Creating and controlling timelines [â€‹](https://gsap.com/resources/react-basics/\#creating-and-controlling-timelines "Direct link to Creating and controlling timelines")

Up until now we've just used refs to store references to DOM elements, but they're not just for elements. **Refs exist outside of the render loop** \- so they can be used to store any value that you would like to persist for the life of a component.

In order to avoid creating a new timeline on every render, it's important to create the timeline inside the `useGSAP()` hook and store it in a `ref`.

```codeBlockLines_p187
function App() {
  const container = useRef();
  const tl = useRef();

  useGSAP(() => {
    tl.current = gsap
      .timeline()
      .to(".box", {
        rotate: 360
      })
      .to(".circle", {
        x: 100
      });
  }, { scope: container });

  return (
    <div className="app" ref={container}>
      <Box>Box</Box>
      <Circle>Circle</Circle>
    </div>
  );
}

```

Easy interactivity!

Storing the timeline in a Ref allows us to access the timeline in other [context-safe](https://gsap.com/resources/React#making-your-animation-context-safe) functions or `useGSAP()` hooks to toggle the timeline direction.

#### loading...

CodePen Embed - Storing a timeline in a ref.

- [HTML](https://codepen.io/GreenSock/embed/eYWGeGe?default-tab=result&theme-id=41164#html-box)
- [CSS](https://codepen.io/GreenSock/embed/eYWGeGe?default-tab=result&theme-id=41164#css-box)
- [Babel](https://codepen.io/GreenSock/embed/eYWGeGe?default-tab=result&theme-id=41164#js-box)

- [Result](https://codepen.io/GreenSock/embed/eYWGeGe?default-tab=result&theme-id=41164#result-box)
- [Skip Results Iframe](https://codepen.io/GreenSock/embed/eYWGeGe?default-tab=result&theme-id=41164#resources-link)

[EDIT ON](https://codepen.io/GreenSock/pen/eYWGeGe "Edit on CodePen")

``` cm-s-default
<div id="root" class="panel center"></div>
```

``` cm-s-default
body{
  margin: 0;
  padding: 0;
  height: 100vh;
}

.app {
  padding: 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.app > * + * {
  margin-top: 1rem
}
```

``` cm-s-default
import React from "https://esm.sh/react@19.0.0";
import ReactDOM from "https://esm.sh/react-dom@19.0.0/client";

import gsap from "https://esm.sh/gsap";
import { useGSAP } from "https://esm.sh/@gsap/react?deps=react@19.0.0";
const { useEffect, useRef, useState } = React;

gsap.registerPlugin(useGSAP);

console.clear();

function Box({ children }) {
  return <div className="box gradient-blue">{children}</div>;
}

function Circle({ children }) {
  return <div className="circle gradient-green">{children}</div>;
}

function App() {
  const container = useRef();
  // store the timeline in a ref.
  const tl = useRef();

  const { contextSafe } = useGSAP(() => {
    // add a box and circle animation to our timeline and play on first render
    console.log("creating timeline");

    tl.current = gsap.timeline()
      .to(".box", {
        rotation: 360
      })
      .to(".circle", {
        x: 100
      });
  }, { scope: container }); // <-- scope for selector text (optional)


  const toggleTimeline = contextSafe(() => {
     tl.current.reversed(!tl.current.reversed())
  });

  return (
    <div className="app" ref={container}>
      <div>
        <button onClick={toggleTimeline}>Toggle</button>
      </div>
      <Box>box</Box>
      <Circle>circle</Circle>
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<App />);
```

[View Compiled](https://codepen.io/GreenSock/embed/eYWGeGe?default-tab=result&theme-id=41164#0)

Storing a timeline in a ref.

Toggle

box

circle

![](https://assets.codepen.io/16327/logo-react-gsap.png)

[useGSAP() hook](https://www.npmjs.com/package/@gsap/react?activeTab=readme) \|
[Docs](https://www.gsap.com/resources/React)

[![](https://assets.codepen.io/16327/internal/avatars/users/default.png?fit=crop&format=auto&height=256&version=1697554632&width=256)](https://codepen.io/GreenSock)

This Pen is owned by [GSAP](https://codepen.io/GreenSock) on [CodePen](https://codepen.io/).



[See more by @GreenSock on CodePen](https://codepen.io/GreenSock)

### External CSS

1. [https://codepen.io/GreenSock/pen/xxmzBrw/fcaef74061bb7a76e5263dfc076c363e.css](https://codepen.io/GreenSock/pen/xxmzBrw/fcaef74061bb7a76e5263dfc076c363e.css)

### External JavaScript

1. [https://codepen.io/GreenSock/pen/NWoLXRG.js](https://codepen.io/GreenSock/pen/NWoLXRG.js)

Resources


- 1Ã—
- 0.5Ã—
- 0.25Ã—

Rerun

## Controlling when React creates our animation. [â€‹](https://gsap.com/resources/react-basics/\#controlling-when-react-creates-our-animation "Direct link to Controlling when React creates our animation.")

`useGSAP()` uses an Effect internally, so we can control when the Effect should run by passing in an Array of dependencies. The default is an **empty Array**, which will run the effect after first render.

We can add props to our dependency array in order to control when our animation plays, this is useful if your animation needs to respond to a change in state. You can also force an animation to trigger on every render by passing in 'null' - but this is generally considered wasteful and should be avoided.

You can [read more about reactive dependencies](https://devtrium.com/posts/dependency-arrays) here.

```codeBlockLines_p187
// default uses [] internally and runs after first render
useGSAP(() => {
  gsap.to(".box-1", { rotation: "+=360" });
});

// runs after first render and every time `endX` changes
useGSAP(() => {
  gsap.to(".box-2", { x: endX  });
}, [endX]);

// this can be written out using the config object in order to pass in scope
useGSAP(() => {
  gsap.to(".box-2", { x: endX });
}, { dependencies: [endX], scope: container});

// ðŸ”¥ will run on every render
useGSAP(() => {
  gsap.to(".box-2", { rotation: "+=360"  });
}, null);

```

#### loading...

CodePen Embed - Controlling when React runs an animation - useEffect

- [HTML](https://codepen.io/GreenSock/embed/RwVZEMg?default-tab=result&theme-id=41164#html-box)
- [CSS](https://codepen.io/GreenSock/embed/RwVZEMg?default-tab=result&theme-id=41164#css-box)
- [Babel](https://codepen.io/GreenSock/embed/RwVZEMg?default-tab=result&theme-id=41164#js-box)

- [Result](https://codepen.io/GreenSock/embed/RwVZEMg?default-tab=result&theme-id=41164#result-box)
- [Skip Results Iframe](https://codepen.io/GreenSock/embed/RwVZEMg?default-tab=result&theme-id=41164#resources-link)

[EDIT ON](https://codepen.io/GreenSock/pen/RwVZEMg "Edit on CodePen")

``` cm-s-default
<div id="root" class="panel center text-center"></div>
```

``` cm-s-default
body{
  margin: 0;
  padding: 0;
  height: 100vh;
}

.app {
  padding: 1px;
  width: 100%;
}

.box {
  margin: 1rem;
  padding: 0.5rem;
  width: 100px;
  height: 100px;
  font-size: 0.9rem;
}

p {
  margin: 0.2em;
  font-size: 0.85rem;
}

button {
  margin-bottom: 0.5rem;
}
```

``` cm-s-default
console.clear();

import React from "https://esm.sh/react@19.0.0";
import ReactDOM from "https://esm.sh/react-dom@19.0.0/client";

import gsap from "https://esm.sh/gsap";
import { useGSAP } from "https://esm.sh/@gsap/react?deps=react@19.0.0";
const { useEffect, useRef, useState } = React;

gsap.registerPlugin(useGSAP);

function App() {
  const app = useRef();

  const box1 = useRef();
  const box2 = useRef();
  const box3 = useRef();

  const [count, setCount] = useState(0);
  const [delayedCount, setDelayedCount] = useState(0);

  // only runs on first render
  useGSAP(() => {
    gsap.to(box1.current, { rotation: "+=360" });
  });

  // runs on first render and every time delayedCount changes
  useGSAP(() => {
    gsap.to(box2.current, { rotation: "+=360" });
  }, [delayedCount]);

  // passing in null to use no dependancy array in the internal useEffect
  // runs on every render
  useGSAP(() => {
    gsap.to(box3.current, { rotation: "+=360" });
  }, null);

  useEffect(() => {
    const timer = setTimeout(() => setDelayedCount(count), 500);

    return () => clearTimeout(timer);
  }, [count]);

  return (
    <div className="app" ref={app}>
      <div>
        <button onClick={() => setCount(count + 1)}>Click to trigger a render</button>
      </div>
      <p>Count: {count}</p>
      <p>Delayed Count: {delayedCount}</p>
      <p>Renders: {1 + delayedCount + count}</p>
      <div className="flex-row">
        <div ref={box1} className="box gradient-purple">First render</div>
        <div ref={box2} className="box gradient-blue">First render & delayed count change</div>
        <div ref={box3} className="box gradient-red">Every render</div>
      </div>
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<App />);
```

[View Compiled](https://codepen.io/GreenSock/embed/RwVZEMg?default-tab=result&theme-id=41164#0)

Controlling when React runs an animation - useEffect

Click to trigger a render

Count: 0

Delayed Count: 0

Renders: 1

First render

First render & delayed count change

Every render

![](https://assets.codepen.io/16327/logo-react-gsap.png)

[useGSAP() hook](https://www.npmjs.com/package/@gsap/react?activeTab=readme) \|
[Docs](https://www.gsap.com/resources/React)

[![](https://assets.codepen.io/16327/internal/avatars/users/default.png?fit=crop&format=auto&height=256&version=1697554632&width=256)](https://codepen.io/GreenSock)

This Pen is owned by [GSAP](https://codepen.io/GreenSock) on [CodePen](https://codepen.io/).



[See more by @GreenSock on CodePen](https://codepen.io/GreenSock)

### External CSS

1. [https://codepen.io/GreenSock/pen/xxmzBrw/fcaef74061bb7a76e5263dfc076c363e.css](https://codepen.io/GreenSock/pen/xxmzBrw/fcaef74061bb7a76e5263dfc076c363e.css)

### External JavaScript

1. [https://codepen.io/GreenSock/pen/NWoLXRG.js](https://codepen.io/GreenSock/pen/NWoLXRG.js)

Resources


- 1Ã—
- 0.5Ã—
- 0.25Ã—

Rerun

## Reacting to changes in state [â€‹](https://gsap.com/resources/react-basics/\#reacting-to-changes-in-state "Direct link to Reacting to changes in state")

Now that we know how to control when an effect fires, we can use this pattern to respond to changes in our component. This is especially useful when passing down props.

```codeBlockLines_p187
function Box({ children, endX }) {
  const boxRef = useRef();

  useGSAP(() => {
    gsap.to(boxRef.current, {
      x: endX,
      duration: 3
    });
  }, [endX]);

  return (
    <div className="box" ref={boxRef}>
      {children}
    </div>
  );
}

```

#### loading...

CodePen Embed - Reacting to changes in state

- [HTML](https://codepen.io/GreenSock/embed/poPrYGa?default-tab=result&theme-id=41164#html-box)
- [CSS](https://codepen.io/GreenSock/embed/poPrYGa?default-tab=result&theme-id=41164#css-box)
- [Babel](https://codepen.io/GreenSock/embed/poPrYGa?default-tab=result&theme-id=41164#js-box)

- [Result](https://codepen.io/GreenSock/embed/poPrYGa?default-tab=result&theme-id=41164#result-box)
- [Skip Results Iframe](https://codepen.io/GreenSock/embed/poPrYGa?default-tab=result&theme-id=41164#resources-link)

[EDIT ON](https://codepen.io/GreenSock/pen/poPrYGa "Edit on CodePen")

``` cm-s-default
<div id="root" class="panel center text-center"></div>
```

``` cm-s-default
body{
  margin: 0;
  padding: 0;
  height: 100vh;
}

.app {
  padding: 10px;
}

.box {
  margin: 1rem auto;
}

```

``` cm-s-default
console.clear();

import React from "https://esm.sh/react@19.0.0";
import ReactDOM from "https://esm.sh/react-dom@19.0.0/client";

import gsap from "https://esm.sh/gsap";
import { useGSAP } from "https://esm.sh/@gsap/react?deps=react@19.0.0";

const { useRef, useState } = React;

gsap.registerPlugin(useGSAP);

const randomX = gsap.utils.random(-200, 200, 1, true);

function App() {
  const [endX, setEndX] = useState(0);

  const boxRef = useRef();
  const container = useRef();

  useGSAP(() => {
    gsap.to(".box", {
      x: endX,
      duration: 1
    });
  }, { dependencies: [endX], scope: container});

  return (
    <div ref={container} className="app">
      <button onClick={() => setEndX(randomX())}>Pass in a randomized value</button>

      <div className="box gradient-blue" ref={boxRef}>{endX}</div>
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<App />);
```

[View Compiled](https://codepen.io/GreenSock/embed/poPrYGa?default-tab=result&theme-id=41164#0)

Reacting to changes in state

Pass in a randomized value

0

![](https://assets.codepen.io/16327/logo-react-gsap.png)

[useGSAP() hook](https://www.npmjs.com/package/@gsap/react?activeTab=readme) \|
[Docs](https://www.gsap.com/resources/React)

[![](https://assets.codepen.io/16327/internal/avatars/users/default.png?fit=crop&format=auto&height=256&version=1697554632&width=256)](https://codepen.io/GreenSock)

This Pen is owned by [GSAP](https://codepen.io/GreenSock) on [CodePen](https://codepen.io/).



[See more by @GreenSock on CodePen](https://codepen.io/GreenSock)

### External CSS

1. [https://codepen.io/GreenSock/pen/xxmzBrw.css](https://codepen.io/GreenSock/pen/xxmzBrw.css)

### External JavaScript

1. [https://codepen.io/GreenSock/pen/NWoLXRG.js](https://codepen.io/GreenSock/pen/NWoLXRG.js)

Resources


- 1Ã—
- 0.5Ã—
- 0.25Ã—

Rerun

info

If you define a dependency array and a dependency changes, the GSAP-related objects (animations, ScrollTriggers, etc.) **wonâ€™t** get reverted. They will only get reverted when the component is unmounted and the hook is torn down. If you'd prefer the context to be reverted every time the hook re-synchronizes (when any dependency changes), you can set `revertOnUpdate: true` in the config object.

You can see in the following demo that the reverted tween 'resets' back to it's original position in the DOM before each animation, whereas the un-reverted tween continues on from it's animated state.

#### loading...

CodePen Embed - revertOnUpdate demo

- [HTML](https://codepen.io/GreenSock/embed/poGGORY?default-tab=result&theme-id=41164#html-box)
- [CSS](https://codepen.io/GreenSock/embed/poGGORY?default-tab=result&theme-id=41164#css-box)
- [Babel](https://codepen.io/GreenSock/embed/poGGORY?default-tab=result&theme-id=41164#js-box)

- [Result](https://codepen.io/GreenSock/embed/poGGORY?default-tab=result&theme-id=41164#result-box)
- [Skip Results Iframe](https://codepen.io/GreenSock/embed/poGGORY?default-tab=result&theme-id=41164#resources-link)

[EDIT ON](https://codepen.io/GreenSock/pen/poGGORY "Edit on CodePen")

``` cm-s-default
<div id="root" class="panel center text-center"></div>
```

``` cm-s-default
body{
  margin: 0;
  padding: 0;
  height: 100vh;
}

.app {
  padding: 10px;
}

.box, .circle {
  margin: 1rem auto;
  width: 75px;
  height: 75px;
  padding: 10px;
}

```

``` cm-s-default
import React from "https://esm.sh/react@19.0.0";
import ReactDOM from "https://esm.sh/react-dom@19.0.0/client";

import gsap from "https://esm.sh/gsap";
import { useGSAP } from "https://esm.sh/@gsap/react?deps=react@19.0.0";
const { useEffect, useLayoutEffect, useRef, useState } = React;

gsap.registerPlugin(useGSAP);

console.clear();

const randomX = gsap.utils.random([-200, 200, -100, 100], true);

function Circle({ endX }) {
  const revert = useRef();

  useGSAP(() => {
    gsap.to(revert.current, {
      x: endX,
      duration: 1,
      delay:0.5,
    });
  }, { dependencies: [endX], revertOnUpdate: true }); // the animation gets reverted every time the prop changes

  return <div ref={revert} className="circle gradient-green">reverted</div>;
}

function Box({ endX }) {
  const noRevert = useRef();

  useGSAP(() => {
    gsap.to(noRevert.current, {
      x: endX,
      duration: 1,
      delay:0.5,
    });
  }, [endX]); // the animation retains it's current value and doesn't get reverted when the prop changes

  return <div ref={noRevert} className="box gradient-blue">not reverted</div>;
}

function App() {
  const [endX, setEndX] = useState(0);

  return (
    <div className="app">
      <button onClick={() => setEndX(randomX())}>
        Pass in a randomized value : {endX}
      </button>
      <Box endX={endX}>{endX}</Box>
      <Circle endX={endX}>{endX}</Circle>
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(<App />);

```

[View Compiled](https://codepen.io/GreenSock/embed/poGGORY?default-tab=result&theme-id=41164#0)

revertOnUpdate demo

Pass in a randomized value : 0

not reverted

reverted

![](https://assets.codepen.io/16327/logo-react-gsap.png)

[useGSAP() hook](https://www.npmjs.com/package/@gsap/react?activeTab=readme) \|
[Docs](https://www.gsap.com/resources/React)

[![](https://assets.codepen.io/16327/internal/avatars/users/default.png?fit=crop&format=auto&height=256&version=1697554632&width=256)](https://codepen.io/GreenSock)

This Pen is owned by [GSAP](https://codepen.io/GreenSock) on [CodePen](https://codepen.io/).



[See more by @GreenSock on CodePen](https://codepen.io/GreenSock)

### External CSS

1. [https://codepen.io/GreenSock/pen/xxmzBrw/fcaef74061bb7a76e5263dfc076c363e.css](https://codepen.io/GreenSock/pen/xxmzBrw/fcaef74061bb7a76e5263dfc076c363e.css)

### External JavaScript

1. [https://codepen.io/GreenSock/pen/NWoLXRG.js](https://codepen.io/GreenSock/pen/NWoLXRG.js)

Resources


- 1Ã—
- 0.5Ã—
- 0.25Ã—

Rerun

## Performant interactive animations [â€‹](https://gsap.com/resources/react-basics/\#performant-interactive-animations "Direct link to Performant interactive animations")

If you're animating on an event like `mousemove` that fires a lot of times per second, we recommend using [`quickTo`](https://gsap.com/docs/v3/GSAP/gsap.quickTo()) or [`quickSetter`](https://gsap.com/docs/v3/GSAP/gsap.quickSetter()) for performance

#### loading...

CodePen Embed - Mouse movement

- [HTML](https://codepen.io/GreenSock/embed//Rwvdowy/aa7e54bfc2a21a99c21230d884cb7176?default-tab=result&theme-id=41164#html-box)
- [CSS](https://codepen.io/GreenSock/embed//Rwvdowy/aa7e54bfc2a21a99c21230d884cb7176?default-tab=result&theme-id=41164#css-box)
- [Babel](https://codepen.io/GreenSock/embed//Rwvdowy/aa7e54bfc2a21a99c21230d884cb7176?default-tab=result&theme-id=41164#js-box)

- [Result](https://codepen.io/GreenSock/embed//Rwvdowy/aa7e54bfc2a21a99c21230d884cb7176?default-tab=result&theme-id=41164#result-box)
- [Skip Results Iframe](https://codepen.io/GreenSock/embed//Rwvdowy/aa7e54bfc2a21a99c21230d884cb7176?default-tab=result&theme-id=41164#resources-link)

[EDIT ON](https://codepen.io/GreenSock/pen/Rwvdowy "Edit on CodePen")

``` cm-s-default
<div id="root" class="panel center"></div>
```

``` cm-s-default
.app {
  padding: 10px;
  height: 100vh;
  width: 100vw;
  display: flex;
  align-items: center;
  justify-content: center;
}

.flair {
  position: fixed;
  transform: translate(-50%, -50%);
  top: 0;
  left: 0;
}
```

``` cm-s-default
import React from "https://esm.sh/react@19.0.0";
import ReactDOM from "https://esm.sh/react-dom@19.0.0/client";

import gsap from "https://esm.sh/gsap";
import { useGSAP } from "https://esm.sh/@gsap/react?deps=react@19.0.0";

gsap.registerPlugin(useGSAP);

const { useRef } = React;

function App() {
  const xTo = useRef();
  const yTo = useRef();
  const app = useRef();

  const { context, contextSafe } =  useGSAP(() => {
    xTo.current = gsap.quickTo(".flair", "x", {duration: 0.8, ease: "power3"}),
    yTo.current = gsap.quickTo(".flair", "y", {duration: 0.8, ease: "power3"});
  },{ scope: app } );

  const moveShape = contextSafe((e) => {
    xTo.current(e.clientX);
    yTo.current(e.clientY);
   });

  return (
    <div className="app" ref={app} onMouseMove={(e) => moveShape(e)} >
      <p>Move your mouse around</p>
      <div className="flair"/>
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(<App />);

```

[View Compiled](https://codepen.io/GreenSock/embed//Rwvdowy/aa7e54bfc2a21a99c21230d884cb7176?default-tab=result&theme-id=41164#0)

Mouse movement

Move your mouse around

![](https://assets.codepen.io/16327/logo-react-gsap.png)

[useGSAP() hook](https://www.npmjs.com/package/@gsap/react?activeTab=readme) \|
[Docs](https://www.gsap.com/resources/React)

[![](https://assets.codepen.io/16327/internal/avatars/users/default.png?fit=crop&format=auto&height=256&version=1697554632&width=256)](https://codepen.io/GreenSock)

This Pen is owned by [GSAP](https://codepen.io/GreenSock) on [CodePen](https://codepen.io/).



[See more by @GreenSock on CodePen](https://codepen.io/GreenSock)

### External CSS

1. [https://codepen.io/GreenSock/pen/xxmzBrw.css](https://codepen.io/GreenSock/pen/xxmzBrw.css)

### External JavaScript

1. [https://codepen.io/GreenSock/pen/NWoLXRG.js](https://codepen.io/GreenSock/pen/NWoLXRG.js)

Resources


- 1Ã—
- 0.5Ã—
- 0.25Ã—

Rerun

[Previous\\
\\
React & GSAP](https://gsap.com/resources/React) [Next\\
\\
Advanced techniques](https://gsap.com/resources/react-advanced)

## Contents

- [useGSAP() is your best friend ðŸ’š](https://gsap.com/resources/react-basics/#usegsap-is-your-best-friend-)
- [Targeting elements with Refs](https://gsap.com/resources/react-basics/#targeting-elements-with-refs)
- [Scoped Selectors](https://gsap.com/resources/react-basics/#scoped-selectors)
- [Reusing components](https://gsap.com/resources/react-basics/#reusing-components)
- [Creating and controlling timelines](https://gsap.com/resources/react-basics/#creating-and-controlling-timelines)
- [Controlling when React creates our animation.](https://gsap.com/resources/react-basics/#controlling-when-react-creates-our-animation)
- [Reacting to changes in state](https://gsap.com/resources/react-basics/#reacting-to-changes-in-state)
- [Performant interactive animations](https://gsap.com/resources/react-basics/#performant-interactive-animations)

## [GSAP](https://gsap.com/)

- [Core](https://gsap.com/core/)
- [Docs](https://gsap.com/docs/v3)
- [All Plugins](https://gsap.com/docs/v3/Plugins/)

## [Scroll](https://gsap.com/scroll/)

- [ScrollTrigger](https://gsap.com/docs/v3/Plugins/ScrollTrigger)
- [ScrollSmoother](https://gsap.com/docs/v3/Plugins/ScrollSmoother)
- [ScrollTo](https://gsap.com/docs/v3/Plugins/ScrollToPlugin)
- [Observer](https://gsap.com/docs/v3/Plugins/Observer)

## [SVG](https://gsap.com/svg/)

- [MorphSVG](https://gsap.com/docs/v3/Plugins/MorphSVGPlugin)
- [DrawSVG](https://gsap.com/docs/v3/Plugins/DrawSVGPlugin)
- [MotionPath](https://gsap.com/docs/v3/Plugins/MotionPathPlugin)
- [MotionPathHelper](https://gsap.com/docs/v3/Plugins/MotionPathHelper)

## [UI](https://gsap.com/ui/)

- [Flip](https://gsap.com/docs/v3/Plugins/Flip)
- [SplitText](https://gsap.com/docs/v3/Plugins/SplitText)
- [Draggable](https://gsap.com/docs/v3/Plugins/Draggable)
- [Inertia](https://gsap.com/docs/v3/Plugins/InertiaPlugin)
- [Observer](https://gsap.com/docs/v3/Plugins/Observer)

## [Text](https://gsap.com/text/)

- [SplitText](https://gsap.com/docs/v3/Plugins/SplitText)
- [ScrambleText](https://gsap.com/docs/v3/Plugins/ScrambleTextPlugin)
- [Text](https://gsap.com/docs/v3/Plugins/TextPlugin)

Subscribe to the GSAPÂ® newsletter to stay up-to-date with the latest releases

Email \*

## Company

- [About](https://gsap.com/about/)
- [Blog](https://gsap.com/blog/)
- [Contact Us](https://gsap.com/community/contact/)

## GSAP

- [Pricing](https://gsap.com/pricing/)
- [Showcase](https://gsap.com/showcase/)
- [Learn GSAP](https://gsap.com/resources/)
- [Community](https://gsap.com/community/)

## Connect

- [Codepen](https://www.codepen.io/GreenSock)
- [GitHub](https://github.com/greensock/GreenSock-JS)
- [Facebook](https://www.facebook.com/greensock)
- [LinkedIn](https://www.linkedin.com/company/greensock)
- [X](https://www.twitter.com/greensock)

Â©2025 GSAP - A Webflow Product. All rights reserved.

- [Privacy Policy.](https://gsap.com/community/privacy-policy/)
- [Terms of Use.](https://gsap.com/community/terms-of-use/)