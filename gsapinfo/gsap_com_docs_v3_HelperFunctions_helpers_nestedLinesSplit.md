[GSAPGSAP](https://gsap.com/) Menu

- Tools




- [Core](https://gsap.com/core/)
- [Scroll](https://gsap.com/scroll/)
- [SVG](https://gsap.com/svg/)
- [UI](https://gsap.com/ui/)
- [Text](https://gsap.com/text/)

- [Installation](https://gsap.com/docs/v3/Installation)
- [Starter Templates](https://gsap.com/demos)
- [GSAP & React](https://gsap.com/resources/React)
- [Video Lessons](https://www.youtube.com/@GreenSockLearning)

Professional-grade JavaScript animation for the modern web

![](https://gsap.com/img/header-shapes.png)

- [Pricing](https://gsap.com/pricing/)
- [Showcase](https://gsap.com/showcase/)
- [Community](https://gsap.com/community/)
- [Learn GSAP](https://gsap.com/resources/)
- [Docs](https://gsap.com/docs/v3)

- Notifications






#### Notifications



[Notification Settings](https://gsap.com/community/notifications/options) [View All](https://gsap.com/community/notifications/)

- Messages






#### Messages



[Compose new](https://gsap.com/community/messenger/compose) [Go to Inbox](https://gsap.com/community/messenger)

- Login/Create Account




#### Sign In







Login [Forgot your password?](https://gsap.com/community/lostpassword/)





#### Why create an account?



- It's free

- Participate in the forums

- Updates on the products you use

- Exclusive offers and more


[Create an Account](https://gsap.com/community/register)

- [My Account](https://gsap.com/community/account-dashboard)








![Guest](https://gsap.com/community/uploads/set_resources_8/84c1e40ea0e759e3f1505eb1788ddf3c_default_photo.png)





Guest







Guests







- [Dashboard](https://gsap.com/community/account-dashboard)
- [Orders & Billing](https://gsap.com/community/clients/orders)
- [Account Settings](https://gsap.com/community/settings)
- [Logout](https://gsap.com/community/logout/?csrfKey=00aa7fd3d09921e27160eb9086945b4a)

- [Get GSAP](https://gsap.com/docs/v3/Installation)

- Tools
  - [Core](https://gsap.com/core/)
  - [Scroll](https://gsap.com/scroll/)
  - [SVG](https://gsap.com/svg/)
  - [UI](https://gsap.com/ui/)
  - [Text](https://gsap.com/text/)
- [Pricing](https://gsap.com/pricing/)
- [Showcase](https://gsap.com/showcase/)
- [Community](https://gsap.com/community/)
- [Learn GSAP](https://gsap.com/resources/)
- [Docs](https://gsap.com/docs/v3/)

- Login/Create Account
- ![Guest](https://gsap.com/community/uploads/set_resources_8/84c1e40ea0e759e3f1505eb1788ddf3c_default_photo.png)





Guest







Guests


![Guest](https://gsap.com/community/uploads/set_resources_8/84c1e40ea0e759e3f1505eb1788ddf3c_default_photo.png)

Guest

Guests

- [Dashboard](https://gsap.com/community/account-dashboard)
- [Orders & Billing](https://gsap.com/community/clients/orders)
- [Account Settings](https://gsap.com/community/settings)
- [Logout](https://gsap.com/community/logout/?csrfKey=00aa7fd3d09921e27160eb9086945b4a)
- [Messages](https://gsap.com/community/messenger/)
- [Notifications](https://gsap.com/community/notifications/)

#### Sign In

Login [Forgot your password?](https://gsap.com/community/lostpassword/)

#### Not got an account?

[Create an Account](https://gsap.com/community/register)

- [CodePen](https://codepen.io/GreenSock)
- [GitHub](https://github.com/greensock/GreenSock-JS/)
- [Facebook](https://www.facebook.com/greensock/)
- [LinkedIn](https://www.linkedin.com/company/greensock)
- [x](https://www.twitter.com/greensock/)

![](https://gsap.com/img/header-shapes.png)

[Skip to main content](https://gsap.com/docs/v3/HelperFunctions/helpers/nestedLinesSplit/#__docusaurus_skipToContent_fallback)

[Docs](https://gsap.com/docs/v3/) [Learning](https://gsap.com/resources)

[v3.12.7](https://gsap.com/docs/v3/)

- [v3.12.7](https://gsap.com/docs/v3/HelperFunctions/helpers/nestedLinesSplit)
- [v2 - archived](https://www.gsap.com/archived-docs/)

Search`` `K`

- [docsHome](https://gsap.com/docs/v3/)
- Quick Start
- [Installation](https://gsap.com/docs/v3/Installation)

- [YouTube Channel](https://www.youtube.com/@GreenSockLearning)
- [Trial the Club Plugins](https://gsap.com/resources/trial)
- [Demos / Starter Templates](https://gsap.com/demos)
- [Cheatsheet](https://gsap.com/cheatsheet)
- Fundamentals
- [GSAP](https://gsap.com/docs/v3/GSAP/)

- [Tween](https://gsap.com/docs/v3/GSAP/Tween)

- [Timeline](https://gsap.com/docs/v3/GSAP/Timeline)

- [CSS](https://gsap.com/docs/v3/GSAP/CorePlugins/CSS)
- [Easing](https://gsap.com/docs/v3/Eases)

- Plugins
- [What's a plugin?](https://gsap.com/docs/v3/Plugins)
- [ScrollTrigger](https://gsap.com/docs/v3/Plugins/ScrollTrigger/)

- [ScrollSmoother](https://gsap.com/docs/v3/Plugins/ScrollSmoother/)

- [Flip](https://gsap.com/docs/v3/Plugins/Flip/)

- [more plugins](https://gsap.com/docs/v3/HelperFunctions/helpers/nestedLinesSplit/#)

- Useful features & tools
- [Utility Methods](https://gsap.com/docs/v3/GSAP/UtilityMethods)

- [Staggers](https://gsap.com/resources/getting-started/Staggers)
- [Helper functions](https://gsap.com/docs/v3/HelperFunctions/)

  - [seamlessLoop](https://gsap.com/docs/v3/HelperFunctions/helpers/seamlessLoop)
  - [stopOverscroll](https://gsap.com/docs/v3/HelperFunctions/helpers/stopOverscroll)
  - [LottieScrollTrigger](https://gsap.com/docs/v3/HelperFunctions/helpers/LottieScrollTrigger)
  - [addWeightedEases](https://gsap.com/docs/v3/HelperFunctions/helpers/addWeightedEases)
  - [alignOrigins](https://gsap.com/docs/v3/HelperFunctions/helpers/alignOrigins)
  - [anchorsToProgress](https://gsap.com/docs/v3/HelperFunctions/helpers/anchorsToProgress)
  - [bgSize](https://gsap.com/docs/v3/HelperFunctions/helpers/bgSize)
  - [blendEases](https://gsap.com/docs/v3/HelperFunctions/helpers/blendEases)
  - [callAfterResize](https://gsap.com/docs/v3/HelperFunctions/helpers/callAfterResize)
  - [compensatedSkew](https://gsap.com/docs/v3/HelperFunctions/helpers/compensatedSkew)
  - [getDirectionalSnapFunc](https://gsap.com/docs/v3/HelperFunctions/helpers/getDirectionalSnapFunc)
  - [easeToLinear](https://gsap.com/docs/v3/HelperFunctions/helpers/easeToLinear)
  - [Flip](https://gsap.com/docs/v3/HelperFunctions/helpers/FLIP)
  - [formatNumber](https://gsap.com/docs/v3/HelperFunctions/helpers/formatNumber)
  - [getNestedLabelTime](https://gsap.com/docs/v3/HelperFunctions/helpers/getNestedLabelTime)
  - [getScrollLookup](https://gsap.com/docs/v3/HelperFunctions/helpers/getScrollLookup)
  - [getScrollPosition](https://gsap.com/docs/v3/HelperFunctions/helpers/getScrollPosition)
  - [imageSequenceScrub](https://gsap.com/docs/v3/HelperFunctions/helpers/imageSequenceScrub)
  - [killChildTweensOf](https://gsap.com/docs/v3/HelperFunctions/helpers/killChildTweensOf)
  - [nestedLinesSplit](https://gsap.com/docs/v3/HelperFunctions/helpers/nestedLinesSplit)
  - [pluckRandomFrom](https://gsap.com/docs/v3/HelperFunctions/helpers/pluckRandomFrom)
  - [progressiveBuild](https://gsap.com/docs/v3/HelperFunctions/helpers/progressiveBuild)
  - [smoothOriginChange](https://gsap.com/docs/v3/HelperFunctions/helpers/smoothOriginChange)
  - [tickGSAPWhileHidden](https://gsap.com/docs/v3/HelperFunctions/helpers/tickGSAPWhileHidden)
  - [trackDirection](https://gsap.com/docs/v3/HelperFunctions/helpers/trackDirection)
  - [weightedRandom](https://gsap.com/docs/v3/HelperFunctions/helpers/weightedRandom)
- [React - useGSAP()](https://gsap.com/resources/React)

- [Helper functions](https://gsap.com/docs/v3/HelperFunctions/)
- nestedLinesSplit

On this page

# SplitText lines in nested elements

SplitText doesn't natively support splitting nested elements by "lines", but if you really need that we've put together a helper function for it.

```codeBlockLines_p187
function nestedLinesSplit(target, vars) {
  var split = new SplitText(target, vars),
    words = vars.type.indexOf("words") !== -1,
    chars = vars.type.indexOf("chars") !== -1,
    insertAt = function (a, b, i) {
      //insert the elements of array "b" into array "a" at index "i"
      var l = b.length,
        j;
      for (j = 0; j < l; j++) {
        a.splice(i++, 0, b[j]);
      }
      return l;
    },
    children,
    child,
    i;

  if (typeof target === "string") {
    target = document.querySelectorAll(target);
  }
  if (target.length > 1) {
    for (i = 0; i < target.length; i++) {
      split.lines = split.lines.concat(nestedLinesSplit(target[i], vars).lines);
    }
    return split;
  }

  //mark all the words and character  elements as _protected so that we can identify the non-split stuff.
  children = (words ? split.words : []).concat(chars ? split.chars : []);
  for (i = 0; i < children.length; i++) {
    children[i]._protect = true;
  }

  children = split.lines;
  for (i = 0; i < children.length; i++) {
    child = children[i].firstChild;
    //if the first child isn't protected and it's not a text node, we found a nested element that we must bust up into lines.
    if (!child._protect && child.nodeType !== 3) {
      children[i].parentNode.insertBefore(child, children[i]);
      children[i].parentNode.removeChild(children[i]);
      children.splice(i, 1);
      i += insertAt(children, nestedLinesSplit(child, vars).lines, i) - 1;
    }
  }
  return split;
}

//used like
var mySplitText = nestedLinesSplit(assetTexts, { type: "lines" });

```

## Demo [â€‹](https://gsap.com/docs/v3/HelperFunctions/helpers/nestedLinesSplit/\#demo "Direct link to Demo")

#### loading...

CodePen Embed - SplitText with nested lines - GSAP 3.0

- [HTML](https://codepen.io/GreenSock/embed/QWLMvxB/d754bcc333a42b5e654e67595951901b?default-tab=result&theme-id=41164#html-box)
- [CSS](https://codepen.io/GreenSock/embed/QWLMvxB/d754bcc333a42b5e654e67595951901b?default-tab=result&theme-id=41164#css-box)
- [JS](https://codepen.io/GreenSock/embed/QWLMvxB/d754bcc333a42b5e654e67595951901b?default-tab=result&theme-id=41164#js-box)

- [Result](https://codepen.io/GreenSock/embed/QWLMvxB/d754bcc333a42b5e654e67595951901b?default-tab=result&theme-id=41164#result-box)
- [Skip Results Iframe](https://codepen.io/GreenSock/embed/QWLMvxB/d754bcc333a42b5e654e67595951901b?default-tab=result&theme-id=41164#resources-link)

[EDIT ON](https://codepen.io/GreenSock/pen/QWLMvxB/d754bcc333a42b5e654e67595951901b "Edit on CodePen")

``` cm-s-default
<h1><div class="text-container">Hi there<div>this is nested</div></div></h1>
```

``` cm-s-default
body{display:flex;align-items:center;justify-content:center;min-height:100vh;}
```

``` cm-s-default
var mySplitText = nestedLinesSplit(".text-container", {type:"lines"}),
    tl = gsap.timeline();

tl.from(mySplitText.lines, {duration: 1, stagger: 0.5, x: 800});

//magical function
function nestedLinesSplit(target, vars) {
  target = gsap.utils.toArray(target);
  if (target.length > 1) {
    let splits = target.map(t => nestedLinesSplit(t, vars)),
        result = splits[0],
        resultRevert = result.revert;
    result.lines = splits.reduce((acc, cur) => acc.concat(cur.lines), []);
    result.revert = () => splits.forEach(s => s === result ? resultRevert() : s.revert());
    return result;
  }
  target = target[0];
  let contents = target.innerHTML;
  gsap.utils.toArray(target.children).forEach(child => {
    let split = new SplitText(child, {type: "lines"});
    split.lines.forEach(line => {
      let clone = child.cloneNode(false);
      clone.innerHTML = line.innerHTML;
      target.insertBefore(clone, child);
    });
    target.removeChild(child);
  });
  let split = new SplitText(target, vars),
      originalRevert = split.revert;
  split.revert = () => {
    originalRevert.call(split);
    target.innerHTML = contents;
  };
  return split;
}

// alternate (legacy)
// function nestedLinesSplit(target, vars) {
//  var split = new SplitText(target, vars),
//    words = (vars.type.indexOf("words") !== -1),
//    chars = (vars.type.indexOf("chars") !== -1),
//    insertAt = function(a, b, i) { //insert the elements of array "b" into array "a" at index "i"
//      var l = b.length,
//        j;
//      for (j = 0; j < l; j++) {
//        a.splice(i++, 0, b[j]);
//      }
//      return l;
//    },
//    children, child, i;

//  if (typeof(target) === "string") {
//    target = document.querySelectorAll(target);
//  }
//  if (target.length > 1) {
//    for (i = 0; i < target.length; i++) {
//      split.lines = split.lines.concat(nestedLinesSplit(target[i], vars).lines);
//    }
//    return split;
//  }

//  //mark all the words and character <div> elements as _protected so that we can identify the non-split stuff.
//  children = (words ? split.words : []).concat(chars ? split.chars : []);
//  for (i = 0; i < children.length; i++) {
//    children[i]._protect = true;
//  }

//  children = split.lines;
//  for (i = 0; i < children.length; i++) {
//    child = children[i].firstChild;
//    //if the first child isn't protected and it's not a text node, we found a nested element that we must bust up into lines.
//    if (!child._protect && child.nodeType !== 3) {
//      children[i].parentNode.insertBefore(child, children[i]);
//      children[i].parentNode.removeChild(children[i]);
//      children.splice(i, 1);
//      i += insertAt(children, nestedLinesSplit(child, vars).lines, i) - 1;
//    }
//  }
//  return split;
// }
```

SplitText with nested lines - GSAP 3.0

# Hi there      this is nested

[![](https://assets.codepen.io/16327/internal/avatars/users/default.png?fit=crop&format=auto&height=256&version=1697554632&width=256)](https://codepen.io/GreenSock)

This Pen is owned by [GSAP](https://codepen.io/GreenSock) on [CodePen](https://codepen.io/).



[See more by @GreenSock on CodePen](https://codepen.io/GreenSock)

### External CSS

1. [https://codepen.io/GreenSock/pen/qEWKyrL.css](https://codepen.io/GreenSock/pen/qEWKyrL.css)

### External JavaScript

1. [https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/gsap-latest-beta.min.js](https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/gsap-latest-beta.min.js)
2. [https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/SplitText3.min.js](https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/SplitText3.min.js)

Resources


- 1Ã—
- 0.5Ã—
- 0.25Ã—

Rerun

[Previous\\
\\
killChildTweensOf](https://gsap.com/docs/v3/HelperFunctions/helpers/killChildTweensOf) [Next\\
\\
pluckRandomFrom](https://gsap.com/docs/v3/HelperFunctions/helpers/pluckRandomFrom)

## Contents

- [Demo](https://gsap.com/docs/v3/HelperFunctions/helpers/nestedLinesSplit/#demo)

## [GSAP](https://gsap.com/)

- [Core](https://gsap.com/core/)
- [Docs](https://gsap.com/docs/v3)
- [All Plugins](https://gsap.com/docs/v3/Plugins/)

## [Scroll](https://gsap.com/scroll/)

- [ScrollTrigger](https://gsap.com/docs/v3/Plugins/ScrollTrigger)
- [ScrollSmoother](https://gsap.com/docs/v3/Plugins/ScrollSmoother)
- [ScrollTo](https://gsap.com/docs/v3/Plugins/ScrollToPlugin)
- [Observer](https://gsap.com/docs/v3/Plugins/Observer)

## [SVG](https://gsap.com/svg/)

- [MorphSVG](https://gsap.com/docs/v3/Plugins/MorphSVGPlugin)
- [DrawSVG](https://gsap.com/docs/v3/Plugins/DrawSVGPlugin)
- [MotionPath](https://gsap.com/docs/v3/Plugins/MotionPathPlugin)
- [MotionPathHelper](https://gsap.com/docs/v3/Plugins/MotionPathHelper)

## [UI](https://gsap.com/ui/)

- [Flip](https://gsap.com/docs/v3/Plugins/Flip)
- [SplitText](https://gsap.com/docs/v3/Plugins/SplitText)
- [Draggable](https://gsap.com/docs/v3/Plugins/Draggable)
- [Inertia](https://gsap.com/docs/v3/Plugins/InertiaPlugin)
- [Observer](https://gsap.com/docs/v3/Plugins/Observer)

## [Text](https://gsap.com/text/)

- [SplitText](https://gsap.com/docs/v3/Plugins/SplitText)
- [ScrambleText](https://gsap.com/docs/v3/Plugins/ScrambleTextPlugin)
- [Text](https://gsap.com/docs/v3/Plugins/TextPlugin)

Subscribe to the GSAPÂ® newsletter to stay up-to-date with the latest releases

Email \*

## Company

- [About](https://gsap.com/about/)
- [Blog](https://gsap.com/blog/)
- [Contact Us](https://gsap.com/community/contact/)

## GSAP

- [Pricing](https://gsap.com/pricing/)
- [Showcase](https://gsap.com/showcase/)
- [Learn GSAP](https://gsap.com/resources/)
- [Community](https://gsap.com/community/)

## Connect

- [Codepen](https://www.codepen.io/GreenSock)
- [GitHub](https://github.com/greensock/GreenSock-JS)
- [Facebook](https://www.facebook.com/greensock)
- [LinkedIn](https://www.linkedin.com/company/greensock)
- [X](https://www.twitter.com/greensock)

Â©2025 GSAP - A Webflow Product. All rights reserved.

- [Privacy Policy.](https://gsap.com/community/privacy-policy/)
- [Terms of Use.](https://gsap.com/community/terms-of-use/)