[GSAPGSAP](https://gsap.com/) Menu

- Tools




- [Core](https://gsap.com/core/)
- [Scroll](https://gsap.com/scroll/)
- [SVG](https://gsap.com/svg/)
- [UI](https://gsap.com/ui/)
- [Text](https://gsap.com/text/)

- [Installation](https://gsap.com/docs/v3/Installation)
- [Starter Templates](https://gsap.com/demos)
- [GSAP & React](https://gsap.com/resources/React)
- [Video Lessons](https://www.youtube.com/@GreenSockLearning)

Professional-grade JavaScript animation for the modern web

![](https://gsap.com/img/header-shapes.png)

- [Pricing](https://gsap.com/pricing/)
- [Showcase](https://gsap.com/showcase/)
- [Community](https://gsap.com/community/)
- [Learn GSAP](https://gsap.com/resources/)
- [Docs](https://gsap.com/docs/v3)

- Notifications






#### Notifications



[Notification Settings](https://gsap.com/community/notifications/options) [View All](https://gsap.com/community/notifications/)

- Messages






#### Messages



[Compose new](https://gsap.com/community/messenger/compose) [Go to Inbox](https://gsap.com/community/messenger)

- Login/Create Account




#### Sign In







Login [Forgot your password?](https://gsap.com/community/lostpassword/)





#### Why create an account?



- It's free

- Participate in the forums

- Updates on the products you use

- Exclusive offers and more


[Create an Account](https://gsap.com/community/register)

- [My Account](https://gsap.com/community/account-dashboard)








![Guest](https://gsap.com/community/uploads/set_resources_8/84c1e40ea0e759e3f1505eb1788ddf3c_default_photo.png)





Guest







Guests







- [Dashboard](https://gsap.com/community/account-dashboard)
- [Orders & Billing](https://gsap.com/community/clients/orders)
- [Account Settings](https://gsap.com/community/settings)
- [Logout](https://gsap.com/community/logout/?csrfKey=3eecc84d0e9d0375bf1f237798f970e5)

- [Get GSAP](https://gsap.com/docs/v3/Installation)

- Tools
  - [Core](https://gsap.com/core/)
  - [Scroll](https://gsap.com/scroll/)
  - [SVG](https://gsap.com/svg/)
  - [UI](https://gsap.com/ui/)
  - [Text](https://gsap.com/text/)
- [Pricing](https://gsap.com/pricing/)
- [Showcase](https://gsap.com/showcase/)
- [Community](https://gsap.com/community/)
- [Learn GSAP](https://gsap.com/resources/)
- [Docs](https://gsap.com/docs/v3/)

- Login/Create Account
- ![Guest](https://gsap.com/community/uploads/set_resources_8/84c1e40ea0e759e3f1505eb1788ddf3c_default_photo.png)





Guest







Guests


![Guest](https://gsap.com/community/uploads/set_resources_8/84c1e40ea0e759e3f1505eb1788ddf3c_default_photo.png)

Guest

Guests

- [Dashboard](https://gsap.com/community/account-dashboard)
- [Orders & Billing](https://gsap.com/community/clients/orders)
- [Account Settings](https://gsap.com/community/settings)
- [Logout](https://gsap.com/community/logout/?csrfKey=3eecc84d0e9d0375bf1f237798f970e5)
- [Messages](https://gsap.com/community/messenger/)
- [Notifications](https://gsap.com/community/notifications/)

#### Sign In

Login [Forgot your password?](https://gsap.com/community/lostpassword/)

#### Not got an account?

[Create an Account](https://gsap.com/community/register)

- [CodePen](https://codepen.io/GreenSock)
- [GitHub](https://github.com/greensock/GreenSock-JS/)
- [Facebook](https://www.facebook.com/greensock/)
- [LinkedIn](https://www.linkedin.com/company/greensock)
- [x](https://www.twitter.com/greensock/)

![](https://gsap.com/img/header-shapes.png)

[Skip to main content](https://gsap.com/resources/3-migration/#__docusaurus_skipToContent_fallback)

[Docs](https://gsap.com/docs/v3/) [Learning](https://gsap.com/resources)

[v3.12.7](https://gsap.com/docs/v3/)

- [v3.12.7](https://gsap.com/docs/v3/)
- [v2 - archived](https://www.gsap.com/archived-docs/)

Search`` `K`

- [placeholder](https://gsap.com/resources/)
- Quick Start
- [Installation](https://gsap.com/docs/v3/Installation)
- [YouTube Channel](https://www.youtube.com/@GreenSockLearning)
- [Trial the Club Plugins](https://gsap.com/resources/trial)
- [Demos / Starter Templates](https://gsap.com/demos)
- [Cheatsheet](https://gsap.com/cheatsheet)
- Getting Started
- [Your first animation](https://gsap.com/resources/get-started)
- [Easing](https://gsap.com/resources/getting-started/Easing)
- [Staggers](https://gsap.com/resources/getting-started/Staggers)
- [Sequencing animations](https://gsap.com/resources/getting-started/timelines)
- [Control and Callbacks](https://gsap.com/resources/getting-started/control)
- Plugins
- [What's a plugin?](https://gsap.com/resources/Plugins/)
- [ScrollTrigger tips & mistakes](https://gsap.com/resources/st-mistakes)
- Diving deeper
- [Accessibility](https://gsap.com/resources/a11y)
- [Handling conflicting tweens](https://gsap.com/resources/conflict)
- [Avoiding FOUC](https://gsap.com/resources/fouc)
- [immediateRender](https://gsap.com/resources/immediaterender)
- [Common GSAP mistakes](https://gsap.com/resources/mistakes)
- [The Position Parameter](https://gsap.com/resources/position-parameter)
- [Keyframes](https://gsap.com/resources/keyframes)
- Using GSAP with...
- [JS Frameworks](https://gsap.com/resources/frameworks)
- [React](https://gsap.com/resources/React)

- [SVG](https://gsap.com/resources/svg)
- [Webflow](https://gsap.com/resources/Webflow)
- [Wordpress](https://gsap.com/resources/Wordpress)
- and more...
- [updating to GSAP 3](https://gsap.com/resources/3-migration)

- updating to GSAP 3

On this page

# updating to GSAP 3

info

Upgrading your project from using GSAP 2 to GSAP 3? It's easy. Most legacy code is already 100% compatible, but there are a few key differences to keep in mind. This guide will help move from GSAP 1.x/2.x to the all-new (and very exciting) GSAP 3.

## New Tween/Timeline Syntax (optional) [​](https://gsap.com/resources/3-migration/\#new-tweentimeline-syntax-optional "Direct link to New Tween/Timeline Syntax (optional)")

The old syntax still works, but technically you never need to reference TweenMax, TweenLite, TimelineMax or TimelineLite anymore because they're all simplified into a single [`gsap`](https://gsap.com/docs/v3/GSAP) object!

```codeBlockLines_p187
// old
TweenMax.to(".class", 2, {x: 100});

// new
gsap.to(".class", {duration: 2, x: 100});

// -- Timelines --

// old
var tl = new TimelineMax();

// new
var tl = gsap.timeline();

```

Notice there's no "new" keyword needed to create the [`timeline`](https://gsap.com/docs/v3/GSAP/Timeline).

Internally, there's one " [Tween](https://gsap.com/docs/v3/GSAP/Tween)" class (replaces TweenLite/TweenMax) and one " [Timeline](https://gsap.com/docs/v3/GSAP/Timeline)" class (replaces TimelineLite/TimelineMax), and both have **_all_** of the features like repeat, yoyo, etc. When you call one of the [gsap](https://gsap.com/docs/v3/GSAP) methods like [.to()](https://gsap.com/docs/v3/GSAP/gsap.to()), [.from()](https://gsap.com/docs/v3/GSAP/gsap.from()), etc., it returns an instance of the appropriate class with easily chainable methods. You never need to wonder which flavor (Lite/Max) you need.

So for the vast majority of your code, you could simply replace TweenLite and TweenMax with "gsap". You could also do a search/replace for "new TimelineLite(" and "new TimelineMax(", replacing them with "gsap.timeline(" (notice we left off the closing ")" so that any vars objects are retained, like if you had "new TimelineMax({repeat:-1})" it'd keep the repeat).

## Duration (optional) [​](https://gsap.com/resources/3-migration/\#duration-optional "Direct link to Duration (optional)")

You can still define a tween's duration as the 2nd parameter, but in GSAP 3 we encourage you to define it inside the vars object instead because it's more readable, it fits with the new keyframes feature, and can be function-based:

```codeBlockLines_p187
// old
TweenMax.to(obj, 1.5, {...});
TweenMax.from(obj, 1.5, {...});
TweenMax.fromTo(obj, 1.5, {...}, {...});

// new
gsap.to(obj, {duration: 1.5, ...});
gsap.from(obj, {duration: 1.5, ...});
gsap.fromTo(obj, {...}, {duration: 1.5, ...});

```

## Easing (optional) [​](https://gsap.com/resources/3-migration/\#easing-optional "Direct link to Easing (optional)")

The old eases still work great, but you can switch to the new, more compact ease format that requires less typing, is more readable, and eliminates import hassles. Simply include the ease name (all lowercase) followed by a dot and then the type ( `".in"`, `".out"`, or `".inOut"`). Note that `.out` is the default so you can omit that completely.

```codeBlockLines_p187
// old
ease: Power3.easeInOut
ease: Sine.easeOut
ease: Linear.easeNone
ease: Elastic.easeOut.config(1, 0.5)
ease: SteppedEase.config(5);

// new
ease: "power3.inOut"
ease: "sine"  // the default is .out
ease: "none" // shortened keyword
ease: "elastic(1, 0.5)"
ease: "steps(5)"

```

Notice that for eases that support additional inputs, simply put them within some parenthesis at the end:

```codeBlockLines_p187
// old
ease: Elastic.easeOut.config(1, 0.3)
ease: Elastic.easeIn.config(1, 0.3)

// new
ease: "elastic(1, 0.3)"  // the default is .out
ease: "elastic.in(1, 0.3)"

```

[RoughEase](https://gsap.com/docs/v3/Eases/RoughEase), [SlowMo](https://gsap.com/docs/v3/Eases/SlowMo), and [ExpoScaleEase](https://gsap.com/docs/v3/Eases/ExpoScaleEase) are not included in the core GSAP file - they're in an external EasePack file.

We highly recommend using our [Ease Visualizer](https://gsap.com/docs/v3/Eases) to get the exact ease that you want and easily copy the correct formatting.

## Staggers (optional) [​](https://gsap.com/resources/3-migration/\#staggers-optional "Direct link to Staggers (optional)")

The old stagger methods still exist for legacy code, but GSAP 3 supports staggers in ANY tween! Simply use the `stagger` property within the vars parameter.

```codeBlockLines_p187
// old
TweenMax.staggerTo(obj, 0.5, {...}, 0.1);

// new
// Simple stagger
gsap.to(obj, {..., stagger: 0.1});

// Complex stagger
gsap.to(obj, {..., stagger: {
  each: 0.1,
  from: "center"
  grid: "auto"
}});

```

caution

the old TweenMax.stagger\* methods returned an **_Array_** of tweens but the GSAP 3 legacy version returns a [Timeline](https://gsap.com/docs/v3/GSAP/Timeline) instead. So if you have code that depends on an array being returned, you'll need to adjust your code. You can use [getChildren()](https://gsap.com/docs/v3/GSAP/Timeline/getChildren()) method of the resulting timeline to get an array of nested tweens.

tip

**Handling repeats and onComplete**: if you add a repeat (like `repeat: -1`) to a staggered tween, it will wait until all the sub-tweens finish BEFORE repeating the entire sequence which can be quite handy but if you prefer to have each individual sub-tween repeat independently, just nest the `repeat` INSIDE the `stagger` object, like `stagger: {each: 0.1, repeat: -1}`. The same goes for `yoyo` and `onComplete`.

To learn more about staggers, check out [this article](https://codepen.io/GreenSock/pen/jdawKx).

#### loading...

CodePen Embed - Advanced staggers in GSAP 3

- [HTML](https://codepen.io/GreenSock/embed/jdawKx?default-tab=result&theme-id=41164#html-box)
- [CSS](https://codepen.io/GreenSock/embed/jdawKx?default-tab=result&theme-id=41164#css-box)
- [JS](https://codepen.io/GreenSock/embed/jdawKx?default-tab=result&theme-id=41164#js-box)

- [Result](https://codepen.io/GreenSock/embed/jdawKx?default-tab=result&theme-id=41164#result-box)
- [Skip Results Iframe](https://codepen.io/GreenSock/embed/jdawKx?default-tab=result&theme-id=41164#resources-link)

[EDIT ON](https://codepen.io/GreenSock/pen/jdawKx "Edit on CodePen")

``` cm-s-default
<div id="container"></div>
<div id="instructions">
  <div id="controls">
    <div class="control">
      <div class="control-label">from:</div>
      <div class="control-vertical">
        <label for="center"><input type="radio" id="center" name="from" value="center" checked> <code>"center"</code></label>
        <label for="end"><input type="radio" id="end" name="from" value="end"> <code>"end"</code></label>
        <label for="edges"><input type="radio" id="edges" name="from" value="edges"> <code>"edges"</code></label>
        <label for="random"><input type="radio" id="random" name="from" value="random"> <code>"random"</code></label>
        <label for="index"><input type="radio" id="index" name="from" value="11"> <code id="fromIndex">11 (index)</code></label>
      </div>
    </div>

    <div class="control">
      <div class="control-label">axis:</div>
      <div class="control-vertical">
        <label for="null"><input type="radio" id="null" name="axis" value="null" checked> <code>null</code> (both)</label>
        <label for="x"><input type="radio" id="x" name="axis" value="x"> <code>"x"</code></label>
        <label for="y"><input type="radio" id="y" name="axis" value="y"> <code>"y"</code></label>
      </div>
    </div>

    <div class="control">
      <div class="control-label">ease:</div>
      <div class="control-vertical">
        <label for="linear"><input type="radio" id="linear" name="ease" value='"none"' checked> <code>"none"</code></label>
        <label for='"easeInOut"'><input type="radio" id="easeInOut" name="ease" value='"power3.inOut"'> <code>"power3.inOut"</code></label>
        <label for="easeOut"><input type="radio" id="easeOut" name="ease" value='"power2.in"'> <code>"power2.in"</code></label>
      </div>
    </div>

  </div>
  <p>Play with the options above to see how it affects the animation and the code below. Click any box to have the stagger emanate outward from that specific index number, using the <code class="featured">from:[index]</code> syntax.</p>
  <div class="code">
    <code>gsap.to(".box", {</code><br>
    <code>&nbsp;&nbsp;duration: 1,</code><br>
    <code>&nbsp;&nbsp;scale: 0.1,</code><br>
    <code>&nbsp;&nbsp;y: 40,</code><br>
    <code>&nbsp;&nbsp;ease: "power1.inOut,</code><br>
    <code class="featured">&nbsp;&nbsp;stagger: {</code><br>
    <code class="featured">&nbsp;&nbsp;&nbsp;&nbsp;grid: [7,15],</code><br>
    <code class="featured">&nbsp;&nbsp;&nbsp;&nbsp;from: <span id="from">"center"</span>,<br></code>
    <code id="axisCode" class="featured" style="display:none;">&nbsp;&nbsp;&nbsp;&nbsp;axis: <span id="axis">null</span>,<br></code>
    <code id="easeCode" class="featured" style="display:none;">&nbsp;&nbsp;&nbsp;&nbsp;ease: <span id="ease">Linear.easeNone</span>,<br></code>
    <code class="featured">&nbsp;&nbsp;&nbsp;&nbsp;amount: 1.5</code><br>
    <code class="featured">&nbsp;&nbsp;}</code><br>
    <code>});</code>
  </div>

  <h2>How does it work?</h2>
  <p>All tweens recognize a <code class="featured">stagger</code> special property which can be an object, a number, or a function as described below:</p>


  <h3>Object</h3>
    <p>An object makes configuration simple. It may contain any of the following properties:</p>
<ul>
  <li><strong>amount</strong> [number]: The total amount of time (in seconds) that gets split up among all the staggers. So if <code>amount</code> is <code>1</code> and there are 100 elements that stagger linearly, there would be 0.01 seconds between each tween's start time. If you prefer to specify a certain amount of time between each tween, use the <code>each</code> property <i>instead</i>. A negative <code>amount</code> will invert the timing effect which can be very handy. So <code>{amount:-1, from:"center"}</code> would cause staggers to go from the outer edges in toward the center.</li>
  <li><strong>each</strong> [number]: The amount of time (in seconds) between each animation's start time. So if <code>each</code> is <code>1</code> (regardless of how many elements there are), there would be 1 second between each tween's start time. If you prefer to specify a <strong>total</strong> amount of time to split up among the staggers, use the <code>amount</code> property <i>instead</i>. A negative <code>each</code> will invert the timing effect which can be very handy. So <code>{each:-1, from:"center"}</code> would cause staggers to go from the outer edges in toward the center.</li>
  <li><strong>from</strong> [string | integer]: The position in the array from which the stagger will emanate. To begin with a particular element, for example, use the number representing that element's index in the target array. So <code>from:4</code> begins staggering at the 5th element in the array (because arrays use zero-based indexes). The animation for each element will begin based on the element's proximity to the "from" value in the array (the closer it is, the sooner it'll begin). You can also use the following string values: <code>"start"</code>, <code>"center"</code>, <code>"edges"</code>, <code>"random"</code>, or <code>"end"</code> ("random" was added in version 3.1.0). Default: 0.</li>
  <li><strong>grid</strong> [array | "auto"]: If the elements are being displayed in a grid visually, indicate how many rows and columns there are (like <code>grid:[9,15]</code>) so that GSAP can calculate proximities accordingly. Or use <code>grid:"auto"</code> to have GSAP automatically calculate the rows and columns using <code>element.getBoundingClientRect()</code> (great for responsive layouts). Grids are assumed to flow from top left to bottom right layout-wise (like text that wraps at the right edge). Or if your elements aren't arranged in a uniform grid, check out the <a href="https://codepen.io/GreenSock/pen/gyWrPO?editors=0010" target="_top">distributeByPosition() helper function</a> we created.</li>
  <li><strong>axis</strong> [string]: If you define a <code>grid</code>, staggers are based on each element's total distance to the "from" value on both the x and y axis, but you can focus on just one axis if you prefer (<code>"x"</code> or <code>"y"</code>). Use the demo above to see the effect (it makes more sense when you see it visually).</li>
  <li><strong>ease</strong> [Ease]: The ease that distributes the start times of the animation. So <code>"power2"</code> would start out with bigger gaps and then get more tightly clustered toward the end. Default: <code>"none"</code>.</li>
  </ul>

  <h3>Number</h3>
  <p>A value of <code>stagger: 0.1</code> would cause there to be 0.1 second between the start times of each tween. A negative value would do the same but backwards so that the last element begins first. We commonly call this a "simple" stagger.</p>

  <h3>Function</h3>
  <p>The function is called once for each target/element in the array and should return the total delay from the starting position (not the amount of delay from the previous tween's start time). The function receives the following parameters:</p>
  <ol>
    <li><strong>index</strong> [integer] - The index value from the list</li>
    <li><strong>target</strong> [object] - The target in the list at that index value</li>
    <li><strong>list</strong> [array | NodeList] - The targets array (or NodeList)</li>
  </ol>

  <h2>Repeat / Yoyo</h2>
  <p>If you put your <code>repeat</code> in the top level of the vars object of your tween like <code>gsap.to(... {repeat:-1, stagger:{...})</code>, it waits for <strong>all</strong> of the sub-tweens to finish before repeating the <i>WHOLE</i> sequence, but if  you prefer to have each sub-tween repeat independently (so that as soon as each one completes, it immediately repeats itself), simply nest the <code>repeat</code> (and <code>yoyo</code> if necessary) <strong>inside</strong> the advanced stagger object, like <code>gsap.to(... {stagger:{repeat:-1, ...}});</code> Think of it almost like the advanced stagger object is a vars object for the sub-tweens.</p>


  <h2>Video Explanation</h2>
  <span class="fr-video"><iframe width="560" height="315" src="https://www.youtube.com/embed/wDnUtY5KcOc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></span>


  <h2>FAQ</h2>
  <p>
    <span class="question">Is this only useful for grids?</span>
    Absolutely not! You can get some slick effects by leveraging <code>ease</code> to add more organic spacing, or use the <code>from</code> property to have things emanate outward from a specific element index or the <code>"center"</code>. Even just using <code>amount</code> can be useful because it gives you tight control over when all the staggering will finish regardless of how many elements are in the target array.
  </p>

  <p>
    <span class="question">Does <code>grid: "auto"</code> work for responsive layouts after resize?</span>
    No, stagger values get calculated immediately when the stagger method is called, so if the layout changes after that, you'd need to handle that logic on your own. For example, you could use a timeline's stagger method so that everything is in one instance, then have a resize listener that rewinds the timeline to its starting values, clears it, and then redoes the stagger. <code>timeline.time(0).clear(); timeline.to(...);</code> Ask in the <a href="https://greensock.com/forums/">forums</a> if you need any help with that.
  </p>

  <p>
    <span class="question">What if my elements aren't in a uniform grid (gaps, different sizes, etc.) - can I stagger them based on position?</span>
    Sure, that's the perfect time to use a function-based value. In fact, we've created a <a href="https://codepen.io/GreenSock/pen/gyWrPO?editors=0010" target="_top">distributeByPosition() helper function</a> for this very case that should make it crazy simple for you!.
  </p>

  <p>
    <span class="question">It's not working for me! Why not?</span>
    Make sure you're loading <a href="https://greensock.com/?download=GSAP-JS">GSAP 3</a> or higher (you might need to empty your cache). Otherwise feel free to ask about your issue <a href="https://greensock.com/forums/">in the GreenSock forums</a>.
  </p>
</div>

```

``` cm-s-default
/* Typography */

@font-face {
  font-display: block;
  font-family: Mori;
  font-style: normal;
  font-weight: 400;
  src: url(https://assets.codepen.io/16327/PPMori-Regular.woff) format("woff");
}

@font-face {
  font-display: block;
  font-family: Mori;
  font-style: normal;
  font-weight: 600;
  src: url(https://assets.codepen.io/16327/PPMori-SemiBold.woff) format("woff");
}

@font-face {
  font-display: block;
  font-family: Fraktion Mono;
  font-style: normal;
  font-weight: 400;
  src: url(https://assets.codepen.io/16327/PPFraktionMono-Bold.woff)
    format("woff");
}

html, body {
  width: 0;         /* for fixing iOS iframe issues */
  min-width: 100%;  /* for fixing iOS iframe issues */
  overflow-x: hidden;
  position: relative;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
body {
  background-color: #0e100f;
  text-align: center;
  color: #bbb;
  font-weight: 300;
  font-size: 18px;
  padding: 10px 0;
  font-family: Mori, sans-serif;
}

h1 {
  margin: 0;
  font-size: 50px;
  text-align: left;
}
h2 {
  font-size: 38px;
  margin-bottom: 0;
}
h1, h2, h3 {
  color: white;
  font-weight: 400;
}
h3 {
  margin-bottom: -12px;
}
#header {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
}
a {
  text-decoration: none;
  font-weight: 400;
  color: #0ae448;
}
a:hover {
  text-decoration: underline;
}
#container {
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: visible;
}
.box {
  background-color: #0ae448;
  position: relative;
  border-radius: 5px;
}
.box:before {
  padding-top:100%;
  content:"";
  display:block;
}
#instructions {
  margin-top: 35px;
  padding:0 16px 16px 16px;
  text-align: left;
  max-width: 1000px;
  display: inline-block;
}

.code {
  background-color: #111;
  padding: 12px;
  border-radius: 10px;
}
.featured {
  color: white;
}
strong {
  color: white;
  font-weight: 400;
  font-size: 20px;
}
.question {
  color: white;
  font-size: 21px;
  font-weight: 400;
  display: block;
}
#controls {
  text-align: center;
  display:flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: start;
}
.control {
  display: flex;
  align-items: flex-start;
  font-family: "Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace;
  color: white;
  margin-bottom: 10px;
}
.control-label {
  margin-top: 10px;
}
.control-vertical {
  display: flex;
  flex-direction: column;
  align-content: flex-start;
  text-align: left;
  justify-content: flex-start;
  padding: 6px 8px;
  border-radius: 9px;
  background-color: #111;
  margin-right: 18px;
  color: #bbb;
}

.fr-video {
  display: block;
  position: relative;
  width: 100%;
  height: 0;
  float: left;
  padding-bottom: 56.25%;
  margin: 12px 0 35px 0;
}

.fr-video iframe {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  border: 2px solid #444;
}

#instructions li {
  margin-bottom: 10px;
}

@media only screen and (max-width: 640px) {
  h1 {
    font-size: 30px;
    line-height: 30px;
  }
  #controls {
    align-items: flex-start;
    justify-content: flex-start;
  }
}
```

``` cm-s-default
//GSAP 3 introduces advanced stagger values
var grid = [7,15], //[rows, columns]
    tl = gsap.timeline({repeat: -1, repeatDelay: 0.5});

function animateBoxes(from, axis, ease) {
  //one stagger call does all the animation:
  tl.to(".box", {
      duration: 1,
      scale: 0.1,
      y: 60,
      yoyo: true,
      repeat: 1,
      ease: "power1.inOut",
      stagger: {
        amount: 1.5,
        grid: grid,
        axis: axis,
        ease: ease,
        from: from
      }
    }
  );
}

//builds a grid of <div class="box"> elements, dropped into #container (unrelated to animation code)
buildGrid({grid: grid, className: "box", width: 1000, gutter: 15, parent: "#container", onCellClick: onCellClick});

animateBoxes("center");

//---- the rest of the code below just handles all the interactivity ----

var options = document.querySelectorAll('input[name="from"], input[name="axis"], input[name="ease"]'),
    _select = function(selector) {
      return document.querySelector(selector);
    },
    axisCodeEl = _select("#axisCode"),
    axisEl = _select("#axis"),
    easeCodeEl = _select("#easeCode"),
    easeEl = _select("#ease"),
    fromEl = _select("#from"),
    fromIndexEl = _select("#fromIndex"),
    indexEl = _select("#index"),
    selections = {from: "center", axis: null, ease: "none"},
    i;

//add change listeners
for (i = 0; i < options.length; i++) {
  options[i].addEventListener("change", onOptionChange);
}

function onOptionChange(e) {
  var group = e.target.getAttribute("name"),
      value = e.target.getAttribute("value");
  if (group === "from") {
    updateFrom(value);
  } else if (group === "axis") {
    selections.axis = (value === "null") ? null : value;
    axisCode.style.display = (value === "null") ? "none" : "inline";
    axisEl.textContent = '"' + value + '"';
  } else if (group === "ease") {
    easeEl.textContent = value;
    easeCodeEl.style.display = (value === '"none"') ? "none" : "inline";
    selections.ease = value.split('"').join("");
  }
  updateAnimation();
}

function updateFrom(value) {
  var current = selections.from,
      parsedVal = value,
      newIsNumber = !isNaN(value),
      oldIsNumber = !isNaN(current);
  if (newIsNumber) {
    parsedVal = parseInt(value, 10);
  } else if (value === "end") {
    parsedVal = grid[0] * grid[1] - 1;
    newIsNumber = true;
  }
  if (current !== parsedVal) {
    selections.from = parsedVal;
    fromEl.textContent = (value === "end") ? '"end"' : newIsNumber ? value : '"' + value + '"';
    if (newIsNumber && !oldIsNumber) {
      gsap.to(".box", {duration: 0.3, backgroundColor: "#595959"});
    } else if (!newIsNumber && oldIsNumber) {
      gsap.to(".box", {duration: 0.3, backgroundColor: "#88ce02"});
    }
    if (newIsNumber) {
      if (value !== "end") {
        indexEl.checked = true;
        indexEl.setAttribute("value", parsedVal);
        fromIndexEl.textContent = parsedVal + " (index)";
      }
      gsap.fromTo("[data-index='" + parsedVal + "']", {rotation: 0}, {duration: 0.4, rotation: 360, backgroundColor: "#88ce02", ease: "power1.inOut"});
      if (oldIsNumber) {
        gsap.to("[data-index='" + current + "']", {duration: 0.3, backgroundColor: "#595959"});
      }
    }
  }
}

function onCellClick(e) {
  updateFrom(e.target.index);
  updateAnimation();
}

function updateAnimation() {
  tl.seek(0).clear();
  animateBoxes(selections.from, selections.axis, selections.ease);
}

//helper function to build a grid of <div> elements
function buildGrid(vars) {
  vars = vars || {};
  var container = document.createElement("div"),
    rows = vars.grid[0] || 5,
    cols = vars.grid[1] || 5,
    width = vars.width || 100,
    gutter = vars.gutter || 1,
    className = vars.className || "",
    w = (width - cols * gutter) / cols,
    parent = (typeof(vars.parent) === "string") ? document.querySelector(vars.parent) : vars.parent ? vars.parent : document.body,
    css = "display: inline-block; margin: 0 " + (gutter / width * 100) + "% " + (gutter / width * 100) + "% 0; width: " + (w / width * 100) + "%;",
    l = rows * cols,
    i, box;
  for (i = 0; i < l; i++) {
    box = document.createElement("div");
    box.style.cssText = css;
    box.setAttribute("class", className);
    box.index = i;
    box.setAttribute("data-index", i);
    if (vars.onCellClick) {
      box.addEventListener("click", vars.onCellClick);
    }
    container.appendChild(box);
  }
  container.style.cssText = "width:" + width + "px; line-height: 0; padding:" + gutter + "px 0 0 " + gutter + "px; display:inline-block;";
  parent.appendChild(container);
  return container;
}

//this just helps avoid the pixel-snapping that some browsers do.
gsap.set(".box", {rotation: 0.5, force3D: true});
```

Advanced staggers in GSAP 3

from:

`"center"``"end"``"edges"``"random"``11 (index)`

axis:

`null` (both)`"x"``"y"`

ease:

`"none"``"power3.inOut"``"power2.in"`

Play with the options above to see how it affects the animation and the code below. Click any box to have the stagger emanate outward from that specific index number, using the `from:[index]` syntax.

`gsap.to(".box", {`

`  duration: 1,`

`  scale: 0.1,`

`  y: 40,`

`  ease: "power1.inOut,`

`  stagger: {`

`    grid: [7,15],`

`    from: "center",
` `    axis: null,
` `    ease: Linear.easeNone,
` `    amount: 1.5`

`  }`

`});`

## How does it work?

All tweens recognize a `stagger` special property which can be an object, a number, or a function as described below:

### Object

An object makes configuration simple. It may contain any of the following properties:

- **amount** \[number\]: The total amount of time (in seconds) that gets split up among all the staggers. So if `amount` is `1` and there are 100 elements that stagger linearly, there would be 0.01 seconds between each tween's start time. If you prefer to specify a certain amount of time between each tween, use the `each` property _instead_. A negative `amount` will invert the timing effect which can be very handy. So `{amount:-1, from:"center"}` would cause staggers to go from the outer edges in toward the center.
- **each** \[number\]: The amount of time (in seconds) between each animation's start time. So if `each` is `1` (regardless of how many elements there are), there would be 1 second between each tween's start time. If you prefer to specify a **total** amount of time to split up among the staggers, use the `amount` property _instead_. A negative `each` will invert the timing effect which can be very handy. So `{each:-1, from:"center"}` would cause staggers to go from the outer edges in toward the center.
- **from** \[string \| integer\]: The position in the array from which the stagger will emanate. To begin with a particular element, for example, use the number representing that element's index in the target array. So `from:4` begins staggering at the 5th element in the array (because arrays use zero-based indexes). The animation for each element will begin based on the element's proximity to the "from" value in the array (the closer it is, the sooner it'll begin). You can also use the following string values: `"start"`, `"center"`, `"edges"`, `"random"`, or `"end"` ("random" was added in version 3.1.0). Default: 0.
- **grid** \[array \| "auto"\]: If the elements are being displayed in a grid visually, indicate how many rows and columns there are (like `grid:[9,15]`) so that GSAP can calculate proximities accordingly. Or use `grid:"auto"` to have GSAP automatically calculate the rows and columns using `element.getBoundingClientRect()` (great for responsive layouts). Grids are assumed to flow from top left to bottom right layout-wise (like text that wraps at the right edge). Or if your elements aren't arranged in a uniform grid, check out the [distributeByPosition() helper function](https://codepen.io/GreenSock/pen/gyWrPO?editors=0010) we created.
- **axis** \[string\]: If you define a `grid`, staggers are based on each element's total distance to the "from" value on both the x and y axis, but you can focus on just one axis if you prefer ( `"x"` or `"y"`). Use the demo above to see the effect (it makes more sense when you see it visually).
- **ease** \[Ease\]: The ease that distributes the start times of the animation. So `"power2"` would start out with bigger gaps and then get more tightly clustered toward the end. Default: `"none"`.

### Number

A value of `stagger: 0.1` would cause there to be 0.1 second between the start times of each tween. A negative value would do the same but backwards so that the last element begins first. We commonly call this a "simple" stagger.

### Function

The function is called once for each target/element in the array and should return the total delay from the starting position (not the amount of delay from the previous tween's start time). The function receives the following parameters:

1. **index** \[integer\] - The index value from the list
2. **target** \[object\] - The target in the list at that index value
3. **list** \[array \| NodeList\] - The targets array (or NodeList)

## Repeat / Yoyo

If you put your `repeat` in the top level of the vars object of your tween like `gsap.to(... {repeat:-1, stagger:{...})`, it waits for **all** of the sub-tweens to finish before repeating the _WHOLE_ sequence, but if you prefer to have each sub-tween repeat independently (so that as soon as each one completes, it immediately repeats itself), simply nest the `repeat` (and `yoyo` if necessary) **inside** the advanced stagger object, like `gsap.to(... {stagger:{repeat:-1, ...}});` Think of it almost like the advanced stagger object is a vars object for the sub-tweens.

## Video Explanation

Advanced stagger effects in GSAP 3 - YouTube

GSAP Learning

32.2K subscribers

[Advanced stagger effects in GSAP 3](https://www.youtube.com/watch?v=wDnUtY5KcOc)

GSAP Learning

Search

Watch later

Share

Copy link

Info

Shopping

Tap to unmute

If playback doesn't begin shortly, try restarting your device.

More videos

## More videos

You're signed out

Videos you watch may be added to the TV's watch history and influence TV recommendations. To avoid this, cancel and sign in to YouTube on your computer.

CancelConfirm

Share

Include playlist

An error occurred while retrieving sharing information. Please try again later.

[Watch on](https://www.youtube.com/watch?v=wDnUtY5KcOc&embeds_referring_euri=https%3A%2F%2Fcdpn.io%2F)

0:00

0:00 / 6:56•Live

•

[Watch on YouTube](https://www.youtube.com/watch?v=wDnUtY5KcOc "Watch on YouTube")

## FAQ

Is this only useful for grids?
Absolutely not! You can get some slick effects by leveraging `ease` to add more organic spacing, or use the `from` property to have things emanate outward from a specific element index or the `"center"`. Even just using `amount` can be useful because it gives you tight control over when all the staggering will finish regardless of how many elements are in the target array.


Does `grid: "auto"` work for responsive layouts after resize?
No, stagger values get calculated immediately when the stagger method is called, so if the layout changes after that, you'd need to handle that logic on your own. For example, you could use a timeline's stagger method so that everything is in one instance, then have a resize listener that rewinds the timeline to its starting values, clears it, and then redoes the stagger. `timeline.time(0).clear(); timeline.to(...);` Ask in the [forums](https://greensock.com/forums/) if you need any help with that.


What if my elements aren't in a uniform grid (gaps, different sizes, etc.) - can I stagger them based on position?
Sure, that's the perfect time to use a function-based value. In fact, we've created a [distributeByPosition() helper function](https://codepen.io/GreenSock/pen/gyWrPO?editors=0010) for this very case that should make it crazy simple for you!.


It's not working for me! Why not?
Make sure you're loading [GSAP 3](https://greensock.com/?download=GSAP-JS) or higher (you might need to empty your cache). Otherwise feel free to ask about your issue [in the GreenSock forums](https://greensock.com/forums/).


[![](https://assets.codepen.io/16327/internal/avatars/users/default.png?fit=crop&format=auto&height=256&version=1697554632&width=256)](https://codepen.io/GreenSock)

This Pen is owned by [GSAP](https://codepen.io/GreenSock) on [CodePen](https://codepen.io/).



[See more by @GreenSock on CodePen](https://codepen.io/GreenSock)

### External CSS

This Pen doesn't use any external CSS resources.


### External JavaScript

1. [https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/gsap-latest-beta.min.js](https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/gsap-latest-beta.min.js)

Resources


- 1×
- 0.5×
- 0.25×

Rerun

## Overwriting [​](https://gsap.com/resources/3-migration/\#overwriting "Direct link to Overwriting")

Prior to GSAP 3, the default `overwrite` mode was `"auto"` which analyzes the tweens of the same target that are currently active/running and only overwrites individual properties that overlap/conflict, but in GSAP 3 the default mode is `false` meaning it won't check for any conflicts or apply any overwriting. Why? The overwrite behavior sometimes confused people, plus it required extra processing. We wanted to streamline things in GSAP 3 and make overwriting behavior an opt-in choice.

To get the GSAP 1.x/2.x behavior, simply do this once:

```codeBlockLines_p187
// set the default overwrite mode to "auto", like it was in GSAP 1.x/2.x
gsap.defaults({overwrite: "auto"});

```

Of course you can set overwrite on a per-tween basis too (in the vars object).

Also note that there were more overwrite modes in GSAP 1.x/2.x (like "concurrent", "preexisting" and "allOnStart") that have been eliminated in GSAP 3 to streamline things. Now the only options are `"auto"` (isolates only specific overlapping/conflicting properties), `false` (no overwriting), or `true` (when the tween starts, it immediately kills all other tweens of the same target regardless of which properties are being animated).

**onOverwrite** was removed in favor of a new **onInterrupt** callback that fires if/when the tween is killed before it completes. This could happen because its kill() method is called or due to overwriting.

## Plugins [​](https://gsap.com/resources/3-migration/\#plugins "Direct link to Plugins")

### Loading plugins [​](https://gsap.com/resources/3-migration/\#loading-plugins "Direct link to Loading plugins")

Similar to the old `TweenMax`, some plugins are already included in GSAP's core so that they don't need to be loaded separately. These are called [core plugins](https://gsap.com/docs/v3/GSAP/CorePlugins) and include [AttrPlugin](https://gsap.com/docs/v3/GSAP/CorePlugins/Attributes), [CSSPlugin](https://gsap.com/docs/v3/GSAP/CorePlugins/CSS), [ModifiersPlugin](https://gsap.com/docs/v3/GSAP/CorePlugins/Modifiers), and [SnapPlugin](https://gsap.com/docs/v3/GSAP/CorePlugins/Snap). RoundPropsPlugin is also included for legacy code, but it has been replaced by the more flexible SnapPlugin.

Other plugins, such as [Draggable](https://gsap.com/docs/v3/Plugins/Draggable/), [MotionPathPlugin](https://gsap.com/docs/v3/Plugins/MotionPathPlugin/), [MorphSVGPlugin](https://gsap.com/morphSVG), etc. need to be loaded separately and registered using [`gsap.registerPlugin()`](https://gsap.com/docs/v3/GSAP/gsap.registerPlugin()). We recommend using the [GSAP Installation Helper](https://gsap.com/docs/v3/Installation#installer) to get sample code showing how to load and register each file.

```codeBlockLines_p187
// register plugins (list as many as you'd like)
gsap.registerPlugin(MotionPathPlugin, TextPlugin, MorphSVGPlugin);

```

### MotionPathPlugin replaces BezierPlugin [​](https://gsap.com/resources/3-migration/\#motionpathplugin-replaces-bezierplugin "Direct link to MotionPathPlugin replaces BezierPlugin")

GSAP's new [MotionPathPlugin](https://gsap.com/docs/v3/Plugins/MotionPathPlugin/) is essentially a better, more flexible version of the older BezierPlugin. In most cases, you can just change `bezier` legacy references to `motionPath`:

```codeBlockLines_p187
// old
bezier: [{x:200, y:100}, {x:400, y:0}, {x:300, y:200}]

// new
motionPath: [{x:200, y:100}, {x:400, y:0}, {x:300, y:200}]

```

Keep in mind that MotionPathPlugin also supports SVG paths! If you're having trouble converting your bezier curve to a motion path, feel free to post in [our forums](https://gsap.com/community/).

#### loading...

CodePen Embed - MotionPathPlugin Demo

- [HTML](https://codepen.io/GreenSock/embed/LwzMKL?default-tab=result&theme-id=41164#html-box)
- [CSS](https://codepen.io/GreenSock/embed/LwzMKL?default-tab=result&theme-id=41164#css-box)
- [JS](https://codepen.io/GreenSock/embed/LwzMKL?default-tab=result&theme-id=41164#js-box)

- [Result](https://codepen.io/GreenSock/embed/LwzMKL?default-tab=result&theme-id=41164#result-box)
- [Skip Results Iframe](https://codepen.io/GreenSock/embed/LwzMKL?default-tab=result&theme-id=41164#resources-link)

[EDIT ON](https://codepen.io/GreenSock/pen/LwzMKL "Edit on CodePen")

``` cm-s-default
<h1>MotionPathPlugin (new in GSAP 3)</h1>

<svg width="100%" height="100%" viewBox="-20 0 557 190" id="svg">
  <circle cx="100" cy="100" r="3" />
  <circle cx="300" cy="20" r="3" />
  <path id="path" d="M9,100c0,0,18.53-41.58,49.91-65.11c30-22.5,65.81-24.88,77.39-24.88c33.87,0,57.55,11.71,77.05,28.47c23.09,19.85,40.33,46.79,61.71,69.77c24.09,25.89,53.44,46.75,102.37,46.75c22.23,0,40.62-2.83,55.84-7.43c27.97-8.45,44.21-22.88,54.78-36.7c14.35-18.75,16.43-36.37,16.43-36.37"/>
  <g id="rect">
    <rect width="85" height="30" fill="dodgerblue" />
    <text x="10" y="19" font-size="14">SVG &lt;rect&gt;</text>
  </g>
</svg>

<div id="div">#div</div>

<link href='//fonts.googleapis.com/css?family=Signika+Negative:300,400' rel='stylesheet' type='text/css'>

<a href="https://greensock.com" target="_blank"><img class="gsap-3-logo" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/gsap-3-logo.svg" width="150" /></a>
```

``` cm-s-default
circle {
  fill: black;
}

html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
}
h1 {
  color: white;
}
#rect text {
  pointer-events: none;
}

body {
  background-color: black;
  color: #999;
  font-family: "Signika Negative", Arial, sans-serif;
  font-weight: 300;
  font-size: 17px;
  min-height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;

}
svg {
  overflow: visible;
  height: 100%;

  /* Fix Safari rendering bug */
  transform: translateZ(0);
}

path {
  stroke-width: 2;
  stroke: gray;
}

a {
  color: #88ce02;
  text-decoration: none;
}
a:hover {
  text-decoration: underline;
}
#div {
  width: 120px;
  height: 60px;
  pointer-events: none;
  background-color: #aa00ee;
  color: black;
  text-align: center;
  line-height: 60px;
  position: absolute;
  top: 30%;
  left: 60%;
  font-size: 32px;
}

.gsap-3-logo {
    width: 20vw;
    max-width: 150px;
    position: fixed;
    bottom: 15px;
    right: 15px;
}
```

``` cm-s-default
//register the plugin (just once)
gsap.registerPlugin(MotionPathPlugin);

gsap.to("#rect", {
  duration: 5,
  repeat: 12,
  repeatDelay: 3,
  yoyo: true,
  ease: "power1.inOut",
  motionPath:{
    path: "#path",
    align: "#path",
    autoRotate: true,
    alignOrigin: [0.5, 0.5]
  }
});

```

MotionPathPlugin Demo

# MotionPathPlugin (new in GSAP 3)

SVG <rect>

#div

[![](https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/gsap-3-logo.svg)](https://greensock.com/)

[![](https://assets.codepen.io/16327/internal/avatars/users/default.png?fit=crop&format=auto&height=256&version=1697554632&width=256)](https://codepen.io/GreenSock)

This Pen is owned by [GSAP](https://codepen.io/GreenSock) on [CodePen](https://codepen.io/).



[See more by @GreenSock on CodePen](https://codepen.io/GreenSock)

### External CSS

1. [https://codepen.io/GreenSock/pen/AHquG.css](https://codepen.io/GreenSock/pen/AHquG.css)

### External JavaScript

1. [https://unpkg.co/gsap@3/dist/gsap.min.js](https://unpkg.co/gsap@3/dist/gsap.min.js)
2. [https://unpkg.com/gsap@3/dist/MotionPathPlugin.min.js](https://unpkg.com/gsap@3/dist/MotionPathPlugin.min.js)
3. [https://assets.codepen.io/16327/MotionPathHelper.min.js](https://assets.codepen.io/16327/MotionPathHelper.min.js)

Resources


- 1×
- 0.5×
- 0.25×

Rerun

The old `type: "soft"` of BezierPlugin isn't available directly in MotionPathPlugin (it was rarely used), but there's a helper function in [this forums post](https://gsap.com/community/topic/24052-how-to-do-soft-bezier-with-motionpath/?tab=comments#comment-114049) that'll deliver identical results.

## className tweens removed [​](https://gsap.com/resources/3-migration/\#classname-tweens-removed "Direct link to className tweens removed")

Support for class name tweens has been removed since they're not very performant, they're less clear, and required an uncomfortable amount of kb. Plus they were rarely used. Just use regular tweens instead that explicitly animate each property.

For example if you had this CSS:

```codeBlockLines_p187
.box {
  width: 100px;
  height: 100px;
  background-color: green;
}
.box.active {
  background-color: red;
}

```

You could use this JavaScript:

```codeBlockLines_p187
// old
.to(".class", 0.5, {className: "+=active"})

// new
.to(".class", {backgroundColor: "red"})

// if you need to add a class name in the end, you could do this instead:
.to(".class", {backgroundColor: "red", onComplete: function() {
  this.targets().forEach(elem => elem.classList.add("active"));
}})

```

## ColorPropsPlugin unnecessary [​](https://gsap.com/resources/3-migration/\#colorpropsplugin-unnecessary "Direct link to ColorPropsPlugin unnecessary")

GSAP 3 has improved support for animating color values built into GSAP's core. As such, the old `ColorPropsPlugin` isn't necessary. Simply animate the color values directly as needed!

```codeBlockLines_p187
// old
TweenMax.to(myObject, 0.5, {colorProps: {borderColor: "rgb(204,51,0)"} });

// new
gsap.to(myObject, {borderColor: "rgb(204,51,0)", duration:0.5});

```

## skewType eliminated [​](https://gsap.com/resources/3-migration/\#skewtype-eliminated "Direct link to skewType eliminated")

GSAP 3 removed `skewType` and `CSSPlugin.defaultSkewType` because they were rarely used and we wanted to conserve file size. If you still need this functionality, feel free to use the [`compensatedSkew` helper function](https://gsap.com/docs/v3/HelperFunctions#compensated-skew).

## suffixMap [​](https://gsap.com/resources/3-migration/\#suffixmap "Direct link to suffixMap")

`CSSPlugin.suffixMap` has been replaced by setting the `units` inside of [`gsap.config()`](https://gsap.com/docs/v3/GSAP/gsap.config()) like:

```codeBlockLines_p187
// old
CSSPlugin.suffixMap.left = "%";

// new
gsap.config({units: {"left": "%"}})

```

## Cycle [​](https://gsap.com/resources/3-migration/\#cycle "Direct link to Cycle")

GSAP 2.x stagger methods had a special `cycle` property that'd allow function-based values or arrays whose values would be cycled through, but GSAP 3 replaces this with a new even more flexible [gsap.utils.wrap()](https://gsap.com/docs/v3/GSAP/UtilityMethods/wrap()) utility that can be used in ANY tween, not just staggers!

```codeBlockLines_p187
// old
TweenMax.staggerTo(".class", 0.5, {cycle: {x: [-100, 100]}}, 0.1)

// new
gsap.to(".class", {x: gsap.utils.wrap([-100, 100]), stagger: 0.1})

```

#### loading...

CodePen Embed - GSAP 3 wrap() and wrapYoyo() utilities demo

- [HTML](https://codepen.io/GreenSock/embed/WNeWZWb/5364a46c2767c6258132f7805ea0035e?default-tab=result&theme-id=41164#html-box)
- [CSS](https://codepen.io/GreenSock/embed/WNeWZWb/5364a46c2767c6258132f7805ea0035e?default-tab=result&theme-id=41164#css-box)
- [JS](https://codepen.io/GreenSock/embed/WNeWZWb/5364a46c2767c6258132f7805ea0035e?default-tab=result&theme-id=41164#js-box)

- [Result](https://codepen.io/GreenSock/embed/WNeWZWb/5364a46c2767c6258132f7805ea0035e?default-tab=result&theme-id=41164#result-box)
- [Skip Results Iframe](https://codepen.io/GreenSock/embed/WNeWZWb/5364a46c2767c6258132f7805ea0035e?default-tab=result&theme-id=41164#resources-link)

[EDIT ON](https://codepen.io/GreenSock/pen/WNeWZWb/5364a46c2767c6258132f7805ea0035e "Edit on CodePen")

``` cm-s-default
<h2>GSAP 3 wrap() / wrapYoyo() utilities</h2>
<div id="ball1" class="ball flair flair--2"></div>
<div id="ball2" class="ball flair flair--4"></div>

```

``` cm-s-default
body{
  display:flex;
  align-items:stretch;
  justify-content:space-around;
  min-height:100vh;
  flex-direction: column;
}

.ball {
  width: 100px;
  height: 100px;
  will-change: transform;
}

h2 {
  margin: 20px;
  text-align: center
}
```

``` cm-s-default
gsap.defaults({duration:20, ease:"none"});

var windowWrap = gsap.utils.wrap(0, window.innerWidth),
    windowYoyo = gsap.utils.wrapYoyo(0, window.innerWidth);

gsap.to("#ball1", {
  x: 10000,
  modifiers: {
    x: x => windowWrap(parseFloat(x)) + "px"
  }
});

gsap.to("#ball2", {
  x: 10000,
  modifiers: {
    x: x => windowYoyo(parseFloat(x)) + "px"
  }
});

```

GSAP 3 wrap() and wrapYoyo() utilities demo

## GSAP 3 wrap() / wrapYoyo() utilities

[![](https://assets.codepen.io/16327/internal/avatars/users/default.png?fit=crop&format=auto&height=256&version=1697554632&width=256)](https://codepen.io/GreenSock)

This Pen is owned by [GSAP](https://codepen.io/GreenSock) on [CodePen](https://codepen.io/).



[See more by @GreenSock on CodePen](https://codepen.io/GreenSock)

### External CSS

1. [https://codepen.io/GreenSock/pen/xxmzBrw/fcaef74061bb7a76e5263dfc076c363e.css](https://codepen.io/GreenSock/pen/xxmzBrw/fcaef74061bb7a76e5263dfc076c363e.css)

### External JavaScript

1. [https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/gsap-latest-beta.min.js](https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/gsap-latest-beta.min.js)

Resources


- 1×
- 0.5×
- 0.25×

Rerun

## Ticker [​](https://gsap.com/resources/3-migration/\#ticker "Direct link to Ticker")

If you want a function to run every time that GSAP updates (typically every requestAnimationFrame), simply add a listener to [`gsap.ticker`](https://gsap.com/docs/v3/GSAP/gsap.ticker()) with the new, simpler syntax:

```codeBlockLines_p187
// old
TweenLite.ticker.addEventListener("tick", myFunction);
TweenLite.ticker.removeEventListener("tick", myFunction);

// new
gsap.ticker.add(myFunction);
gsap.ticker.remove(myFunction);

```

Note that there is no `.useRAF()` function. GSAP 3 always uses `requestAnimationFrame` unless it is not supported, in which case it falls back to `setTimeout`.

## Defaults [​](https://gsap.com/resources/3-migration/\#defaults "Direct link to Defaults")

Setting global defaults has been greatly simplified in GSAP 3. Instead of having static defaults (like `TweenLite.defaultEase`, `TweenLite.defaultOverwrite`, `CSSPlugin.defaultTransformPerspective`, and `CSSPlugin.defaultSmoothOrigin`), there is now one simple method where you can set all of these defaults: [`gsap.defaults()`](https://gsap.com/docs/v3/GSAP/gsap.defaults()).

```codeBlockLines_p187
gsap.defaults({
  ease: "power2.in",
  overwrite: "auto",
  smoothOrigin: false,
  transformPerspective: 500,
  duration: 1
});

```

You can also set defaults for each timeline instance which will be inherited by child tweens:

```codeBlockLines_p187
var tl = gsap.timeline({defaults: {
  ease: "power2.in",
  duration: 1
} });

// now tweens created using tl.to(), tl.from(), and tl.fromTo() will use the
// above values as defaults

```

Other configuration values that aren't tween-specific can be set using [`gsap.config()`](https://gsap.com/docs/v3/GSAP/gsap.config()) including what was formerly set using properties like `TweenLite.autoSleep` and `CSSPlugin.defaultForce3D`.

```codeBlockLines_p187
gsap.config({
  autoSleep: 60,
  force3D: false,
  nullTargetWarn: false,
  units: {left: "%", top: "%", rotation: "rad"}
});

```

## Callback scope [​](https://gsap.com/resources/3-migration/\#callback-scope "Direct link to Callback scope")

In GSAP 3 scoping has been simplified. There is no more "scope" parameter in various methods like timeline's `call()` method, and no more `onUpdateScope`, `onStartScope`, `onCompleteScope`, or `onReverseCompleteScope`. Instead, use `callbackScope` to set the scope of _all_ of the callback scopes of a particular tween/timeline or use `.bind` to set the scope of particular callbacks:

```codeBlockLines_p187
// old
TweenMax.to(obj, 0.5, {..., onCompleteScope: anotherObj, onComplete: function() {
  console.log(this); // logs anotherObj
}});

// new
gsap.to(obj, {..., callbackScope: anotherObj, onComplete: function() {
  console.log(this); // logs anotherObj
} });

// or
gsap.to(obj, {..., onComplete: function() {
  console.log(this); // logs anotherObj
}.bind(anotherObj) });

```

You can access the tween itself by using `this` inside of the callback. In GSAP 1.x/2.x, you could reference a special `"{self}"` value in onCompleteParams, for example, but that's no longer valid because the callback is scoped to the tween instance itself by default. So, for example, you can get the tween's targets by using `this.targets()`. For example:

```codeBlockLines_p187
// old
TweenMax.to(obj, 0.5, {onComplete: function() {
  console.log(this.target);
}});

// new
gsap.to(obj, {onComplete: function() {
  console.log(this.targets()); // an array
}});

```

If `this.targets` is undefined, it's probably because you're using an [arrow function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions) which always locks its scope to where the arrow function was originally declared. If you want "this" to refer to the tween instance, just use a normal function instead of an arrow function.

```codeBlockLines_p187
gsap.to(".class", {
    // BE CAREFUL! Arrow functions lock scope to where they were created, so "this" won't refer to the tween instance here!
    // Use normal functions if you need "this" to refer to the tween instance.
    onComplete: () => console.log(this.targets()) // will not work
});

```

If you prefer using arrow functions (to lock scope to your object/context) and need to reference the tween instance in your callback, you could use this helper function:

```codeBlockLines_p187
// this function will always push the tween instance into the parameters for you and allow you to define a scope.
function callback(func, scope, params) {
  let tween;
  params = params || [];
  return function() {
    if (!tween) {
      tween = this;
      params.push(tween);
    }
    func.apply(scope || tween, params);
  };
}

```

And then you could use it like this:

```codeBlockLines_p187
gsap.to(... {
  onComplete: callback(tween => {
    console.log(this); // since this is an arrow function, scope is locked anyway so this is your class instance
    console.log(tween); // tween instance
  })
});

```

## ThrowPropsPlugin renamed InertiaPlugin [​](https://gsap.com/resources/3-migration/\#throwpropsplugin-renamed-inertiaplugin "Direct link to ThrowPropsPlugin renamed InertiaPlugin")

ThrowPropsPlugin has been renamed [InertiaPlugin](https://gsap.com/docs/v3/Plugins/InertiaPlugin) and has some new features.

## Other things to keep in mind [​](https://gsap.com/resources/3-migration/\#other-things-to-keep-in-mind "Direct link to Other things to keep in mind")

### Transforms [​](https://gsap.com/resources/3-migration/\#transforms "Direct link to Transforms")

We recommend setting all transform-related values via GSAP to maximize performance and avoid rotational and unit ambiguities. However, since it's relatively common for developers to set a value like `transform: translate(-50%, -50%)` in their CSS and the browser always reports those values in pixels, GSAP senses when the x/y translations are exactly -50% in pixels and sets `xPercent` or `yPercent` as a convenience in order to keep things centered. If you want to set things differently, again, just make sure you're doing so directly through GSAP, like `gsap.set("#id", {xPercent:0, x:100, yPercent:0, y:50})`.

### Getting an object's properties [​](https://gsap.com/resources/3-migration/\#getting-an-objects-properties "Direct link to Getting an object's properties")

In GSAP 1.x/2.x, it was relatively common for developers to access an element's transform-specific properties via the undocumented \_gsTransform object but in GSAP 3 it's much easier. [`gsap.getProperty()`](https://gsap.com/docs/v3/GSAP/gsap.getProperty()) lets you get **any** property, including transforms. There is no more `_gsTransform`.

```codeBlockLines_p187
// old
element._gsTransform.x

// new
gsap.getProperty(element, "x")

```

### Referring to the core classes [​](https://gsap.com/resources/3-migration/\#referring-to-the-core-classes "Direct link to Referring to the core classes")

If you need to refer to the core [Tween](https://gsap.com/docs/v3/GSAP/Tween) or [Timeline](https://gsap.com/docs/v3/GSAP/Timeline) class, you can do so by referencing `gsap.core.Tween` and `gsap.core.Timeline`.

### timeScale() and reversed() [​](https://gsap.com/resources/3-migration/\#timescale-and-reversed "Direct link to timeScale() and reversed()")

In GSAP 3 the timeScale controls the direction of playback, so setting it to a negative number makes the animation play backwards. That means it is intuitively linked with the `reversed()` method. If, for example, timeScale is 0.5 and then you call reverse() it will be set to -0.5. In GSAP 2 and earlier, the "reversed" state of the animation was completely independent from timeScale (which wasn't allowed to be negative). So in GSAP 3, you could even animate timeScale from positive to negative and back again!

## Removed methods/properties [​](https://gsap.com/resources/3-migration/\#removed-methodsproperties "Direct link to Removed methods/properties")

- **TweenLite.selector** \- There's no more `TweenLite.selector` or `TweenMax.selector` (it's pointless with `document.querySelectorAll()` that's in browsers now).
- **timeline.addCallback()** \- dropped in favor of the simpler `.call()` method.
- **TweenMax's pauseAll(), resumeAll(), killAll(), and globalTimeScale()** \- dropped in favor of directly accessing methods on the [`globalTimeline`](https://gsap.com/docs/v3/GSAP/gsap.globalTimeline()), like:




```codeBlockLines_p187
gsap.globalTimeline.pause();
gsap.globalTimeline.resume();
gsap.globalTimeline.clear(); // like killAll()
gsap.globalTimeline.timeScale(0.5);

```


## Frequently Asked Questions (FAQ) [​](https://gsap.com/resources/3-migration/\#frequently-asked-questions-faq "Direct link to Frequently Asked Questions (FAQ)")

#### Why migrate to GSAP 3?

GSAP 3 is almost half the file size of the old TweenMax, has 50+ more features, and has a simpler API.

#### Do I have to use the new syntax?

We highly recommend that you use the new syntax, but no, it's not imperative. Most old GSAP syntax will work just fine in GSAP 3. We're pretty confident that you'll love the new syntax once you're used to it!

#### Will GSAP 2.x be actively maintained for years?

We'll certainly answer questions in [the forums](https://gsap.com/community/) and help users of GSAP 2.x, but we're focusing all of our development resources on the more modern 3.x moving forward so don't expect any additional 2.x releases in the future.

#### My production build isn't working with GSAP 3. Why?

Usually this just means that your build tool is applying tree shaking and dumping plugins - that's why you need to register your plugins with [gsap.registerPlugin()](https://gsap.com/docs/v3/GSAP/gsap.registerPlugin()). We recommend that you use the [Installation Helper](https://gsap.com/docs/v3/Installation#installer) which gives you code for proper registration as well.

#### I am seeing some odd/unexpected behavior but don't have any errors. What's going on?

Try setting `gsap.defaults({overwrite: "auto"})` and see if that fixes the issue. If it does, you must have created some conflicting tweens. You could either keep the default overwrite value of `"auto"` or restructure your animation to avoid the conflict.

If that doesn't fix the issue, please post in [our forums](https://gsap.com/community/) and we'd be happy to help!

## More information [​](https://gsap.com/resources/3-migration/\#more-information "Direct link to More information")

For a deep dive into the nitty-gritty of GSAP 3, check out the [GSAP 3 Release Notes](https://gsap.com/blog/3-release-notes). As always, if you have questions or are having trouble [our forums](https://gsap.com/community/) are available to help you!

[Previous\\
\\
Wordpress](https://gsap.com/resources/Wordpress)

## Contents

- [New Tween/Timeline Syntax (optional)](https://gsap.com/resources/3-migration/#new-tweentimeline-syntax-optional)
- [Duration (optional)](https://gsap.com/resources/3-migration/#duration-optional)
- [Easing (optional)](https://gsap.com/resources/3-migration/#easing-optional)
- [Staggers (optional)](https://gsap.com/resources/3-migration/#staggers-optional)
- [Overwriting](https://gsap.com/resources/3-migration/#overwriting)
- [Plugins](https://gsap.com/resources/3-migration/#plugins)
  - [Loading plugins](https://gsap.com/resources/3-migration/#loading-plugins)
  - [MotionPathPlugin replaces BezierPlugin](https://gsap.com/resources/3-migration/#motionpathplugin-replaces-bezierplugin)
- [className tweens removed](https://gsap.com/resources/3-migration/#classname-tweens-removed)
- [ColorPropsPlugin unnecessary](https://gsap.com/resources/3-migration/#colorpropsplugin-unnecessary)
- [skewType eliminated](https://gsap.com/resources/3-migration/#skewtype-eliminated)
- [suffixMap](https://gsap.com/resources/3-migration/#suffixmap)
- [Cycle](https://gsap.com/resources/3-migration/#cycle)
- [Ticker](https://gsap.com/resources/3-migration/#ticker)
- [Defaults](https://gsap.com/resources/3-migration/#defaults)
- [Callback scope](https://gsap.com/resources/3-migration/#callback-scope)
- [ThrowPropsPlugin renamed InertiaPlugin](https://gsap.com/resources/3-migration/#throwpropsplugin-renamed-inertiaplugin)
- [Other things to keep in mind](https://gsap.com/resources/3-migration/#other-things-to-keep-in-mind)
  - [Transforms](https://gsap.com/resources/3-migration/#transforms)
  - [Getting an object's properties](https://gsap.com/resources/3-migration/#getting-an-objects-properties)
  - [Referring to the core classes](https://gsap.com/resources/3-migration/#referring-to-the-core-classes)
  - [timeScale() and reversed()](https://gsap.com/resources/3-migration/#timescale-and-reversed)
- [Removed methods/properties](https://gsap.com/resources/3-migration/#removed-methodsproperties)
- [Frequently Asked Questions (FAQ)](https://gsap.com/resources/3-migration/#frequently-asked-questions-faq)
- [More information](https://gsap.com/resources/3-migration/#more-information)

## [GSAP](https://gsap.com/)

- [Core](https://gsap.com/core/)
- [Docs](https://gsap.com/docs/v3)
- [All Plugins](https://gsap.com/docs/v3/Plugins/)

## [Scroll](https://gsap.com/scroll/)

- [ScrollTrigger](https://gsap.com/docs/v3/Plugins/ScrollTrigger)
- [ScrollSmoother](https://gsap.com/docs/v3/Plugins/ScrollSmoother)
- [ScrollTo](https://gsap.com/docs/v3/Plugins/ScrollToPlugin)
- [Observer](https://gsap.com/docs/v3/Plugins/Observer)

## [SVG](https://gsap.com/svg/)

- [MorphSVG](https://gsap.com/docs/v3/Plugins/MorphSVGPlugin)
- [DrawSVG](https://gsap.com/docs/v3/Plugins/DrawSVGPlugin)
- [MotionPath](https://gsap.com/docs/v3/Plugins/MotionPathPlugin)
- [MotionPathHelper](https://gsap.com/docs/v3/Plugins/MotionPathHelper)

## [UI](https://gsap.com/ui/)

- [Flip](https://gsap.com/docs/v3/Plugins/Flip)
- [SplitText](https://gsap.com/docs/v3/Plugins/SplitText)
- [Draggable](https://gsap.com/docs/v3/Plugins/Draggable)
- [Inertia](https://gsap.com/docs/v3/Plugins/InertiaPlugin)
- [Observer](https://gsap.com/docs/v3/Plugins/Observer)

## [Text](https://gsap.com/text/)

- [SplitText](https://gsap.com/docs/v3/Plugins/SplitText)
- [ScrambleText](https://gsap.com/docs/v3/Plugins/ScrambleTextPlugin)
- [Text](https://gsap.com/docs/v3/Plugins/TextPlugin)

Subscribe to the GSAP® newsletter to stay up-to-date with the latest releases

Email \*

## Company

- [About](https://gsap.com/about/)
- [Blog](https://gsap.com/blog/)
- [Contact Us](https://gsap.com/community/contact/)

## GSAP

- [Pricing](https://gsap.com/pricing/)
- [Showcase](https://gsap.com/showcase/)
- [Learn GSAP](https://gsap.com/resources/)
- [Community](https://gsap.com/community/)

## Connect

- [Codepen](https://www.codepen.io/GreenSock)
- [GitHub](https://github.com/greensock/GreenSock-JS)
- [Facebook](https://www.facebook.com/greensock)
- [LinkedIn](https://www.linkedin.com/company/greensock)
- [X](https://www.twitter.com/greensock)

©2025 GSAP - A Webflow Product. All rights reserved.

- [Privacy Policy.](https://gsap.com/community/privacy-policy/)
- [Terms of Use.](https://gsap.com/community/terms-of-use/)